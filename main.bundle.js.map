{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/app/core/GameObject.ts","webpack:///./src/engine/lights/Light.ts","webpack:///./src/engine/core/Object3D.ts","webpack:///./src/engine/materials/Material.ts","webpack:///./src/app/objects/Player.ts","webpack:///./src/engine/core/Mesh.ts","webpack:///./src/engine/lights/AmbientLight.ts","webpack:///./src/engine/lights/DirectionalLight.ts","webpack:///./src/engine/lights/PointLight.ts","webpack:///./src/app/core/GameScene.ts","webpack:///./src/engine/Scene.ts","webpack:///./src/engine/cameras/PerspectiveCamera.ts","webpack:///./src/engine/cameras/Camera.ts","webpack:///./src/app/objects/Sphere.ts","webpack:///./src/engine/geometries/SpherePrimitive.ts","webpack:///./src/engine/geometries/TwglPrimitive.ts","webpack:///./src/engine/core/Accessor.ts","webpack:///./src/engine/core/BufferView.ts","webpack:///./src/engine/core/Primitive.ts","webpack:///./src/engine/loaders/GLTFLoader.ts","webpack:///./src/engine/textures/TextureSampler.ts","webpack:///./src/engine/textures/Texture.ts","webpack:///./src/app/objects/Wall.ts","webpack:///./src/app/UiController.ts","webpack:///./src/app/index.ts","webpack:///./src/engine/WebGlApplication.ts","webpack:///./src/engine/renderers/webgl/WebGLRenderer.ts","webpack:///./src/engine/renderers/webgl/WebGL.ts","webpack:///./src/engine/renderers/webgl/core-shaders.ts","webpack:///./src/engine/materials/ShaderMaterial.ts","webpack:///./src/app/scenes/TestScene.ts","webpack:///./src/engine/cameras/OrthographicCamera.ts","webpack:///./src/engine/Utils.ts","webpack:///./src/app/objects/Cube.ts","webpack:///./src/engine/geometries/CubePrimitive.ts","webpack:///./src/app/utils.ts","webpack:///./src/app/objects/Floor.ts","webpack:///./src/app/scenes/LabyrinthScene.ts","webpack:///./src/app/objects/Key.ts","webpack:///./src/app/objects/Door.ts","webpack:///./src/app/objects/Sky.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","parentHotUpdateCallback","window","hotAvailableFilesMap","hotRequestedFilesMap","hotUpdate","hotWaitingFiles","hotChunksLoading","hotUpdateDownloaded","hotAddUpdateChunk","hotCurrentChildModule","hotApplyOnUpdate","hotCurrentHash","hotCurrentModuleData","hotCurrentParents","hotCurrentParentsTemp","hotCreateModule","hot","_acceptedDependencies","_declinedDependencies","_selfAccepted","_selfDeclined","_selfInvalidated","_disposeHandlers","_main","active","accept","dep","callback","undefined","decline","dispose","addDisposeHandler","removeDisposeHandler","idx","indexOf","invalidate","this","hotStatus","hotSetStatus","hotApplyInvalidatedModule","hotQueuedInvalidatedModules","check","hotCheck","hotApply","status","l","hotStatusHandlers","addStatusHandler","removeStatusHandler","newStatus","hotDeferred","hotUpdateNewHash","hotWaitingFilesMap","toModuleId","id","Error","requestTimeout","Promise","resolve","reject","XMLHttpRequest","request","requestPath","p","open","timeout","send","err","onreadystatechange","readyState","update","JSON","parse","responseText","e","then","hotApplyInvalidatedModules","c","h","promise","hotEnsureUpdateChunk","script","document","createElement","charset","src","head","appendChild","hotDownloadUpdateChunk","deferred","outdatedModules","options","hotApplyInternal","cb","module","getAffectedStuff","updateModuleId","outdatedDependencies","queue","map","chain","queueItem","pop","installedModules","type","parents","parentId","parent","concat","addAllToSet","a","b","item","appliedUpdate","warnUnexpectedRequire","console","warn","abortError","doApply","doDispose","chainInfo","join","onDeclined","ignoreDeclined","onUnaccepted","ignoreUnaccepted","onAccepted","onDisposed","outdatedSelfAcceptedModules","slice","errorHandler","keys","forEach","hotDisposeChunk","dependency","moduleOutdatedDependencies","disposeHandlers","children","child","error","callbacks","onErrored","dependencyId","ignoreErrored","err2","originalError","list","0","exports","me","fn","ObjectFactory","name","configurable","enumerable","get","set","value","defineProperty","finishChunkLoading","t","mode","hotCreateRequire","m","d","getter","o","r","Symbol","toStringTag","__esModule","ns","create","key","bind","n","object","property","jsonpArray","oldJsonpFunction","GameObject","Object3D","Light","super","color","intensity","translation","vec3","clone","fromValues","rotation","quat","scale","matrix","mat4","updateTransform","updateMatrix","mesh","onEnter","traverse","onLeave","getRotation","getTranslation","getScaling","fromRotationTranslationScale","transform","getGlobalTransform","mul","node","index","baseColorTexture","baseColorTexCoord","baseColorFactor","vec4","baseColorTransform","mat3","metallicRoughnessTexture","metallicRoughnessTexCoord","metallicFactor","roughnessFactor","normalTexture","normalTexCoord","normalFactor","occlusionTexture","occlusionTexCoord","occlusionFactor","emissiveTexture","emissiveTexCoord","emissiveFactor","alphaMode","alphaCutoff","doubleSided","Player","Sphere","radius","mass","camera","PerspectiveCamera","fov","near","addChild","foundKeys","load","controls","PlayerControls","body","dt","time","x","y","z","Math","PI","fromEuler","velocityFactor","mouseSensitivity","mousemoveHandler","keydownHandler","keyupHandler","pressedKeys","forward","sin","cos","right","up","inputVelocity","add","sub","velocity","vadd","CANNON","Vec3","addEventListener","removeEventListener","dx","movementX","dy","movementY","pi","twopi","halfpi","code","primitives","material","primitive","AmbientLight","defaultDirection","DirectionalLight","direction","PointLight","GameScene","Scene","world","World","gravity","loadPromises","all","addBody","fixedStep","aspectRatio","aspect","nodes","regex","RegExp","test","filter","Camera","far","Infinity","projection","updateProjection","perspective","physicsMaterial","Mesh","SpherePrimitive","subdivisionsHeight","subdivisionsAxis","Body","shape","position","quaternion","Quaternion","toArray","TwglPrimitive","vertices","createSphereVertices","Primitive","primitiveOptions","attributes","POSITION","Accessor","numComponents","componentType","count","bufferView","bufferViewFromTypedArray","NORMAL","normal","TEXCOORD_0","texcoord","typedArray","BufferView","buffer","byteLength","byteOffset","byteStride","indices","normalized","min","max","Material","attribute","gltf","gltfUrl","cache","Map","url","response","fetch","json","arrayBuffer","image","Image","mapping","nameOrIndex","find","element","URL","location","origin","fetchJson","defaultScene","scene","gltfSpec","findByNameOrIndex","images","has","uri","fetchImage","toString","loadBufferView","blob","Blob","mimeType","createObjectURL","revokeObjectURL","buffers","fetchBuffer","bufferViews","loadBuffer","accessors","accessorTypeToNumComponentsLookup","accessor","samplers","sampler","TextureSampler","minFilter","mag","magFilter","wrapS","wrapT","textures","source","loadImage","loadSampler","texture","Texture","materials","pbr","pbrMetallicRoughness","loadTexture","texCoord","getTextureTransform","strength","textureWrapper","gltfTransform","extensions","KHR_texture_transform","resultTransform","fromScaling","offset","fromTranslation","fromRotation","multiply","meshes","primitiveSpec","isPrimitiveAttributeName","loadAccessor","loadMaterial","deep","scaledColor","light","buildLight","cameras","persp","yfov","znear","zfar","ortho","orthographic","OrthographicCamera","left","xmag","bottom","ymag","top","loadLight","nodeIndex","loadNode","loadMesh","scenes","hasMipmaps","Wall","assign","meshToCannonShape","setScale","BODY_TYPES","STATIC","UiController","startButton","getElementById","restartButton","startOverButton","startScreen","loseScreen","winScreen","gameStatusPanel","timeLeftValue","keysFoundValue","canvas","querySelector","instance","setIsVisible","seconds","log","innerText","totalKeys","isLoading","setAttribute","removeAttribute","isVisible","style","display","App","WebGlApplication","sound","Howl","html5","volume","loop","cameraConfig","rotatingObjectConfig","rotationX","rotationY","rotationZ","LabyrinthScene","start","play","player","findNodes","renderer","WebGLRenderer","gl","clearColor","prepareScene","rotateTargetObject","matchingObjects","findNodesByNamePattern","render","resize","requestPointerLock","pointerLockElement","enable","disable","uiController","app","startGame","stop","setIsStartScreenLoading","showGameScreen","enableCamera","showStartScreen","glOptions","internalUpdate","_initGL","getContext","internalResize","t0","animationFrame","requestAnimationFrame","width","clientWidth","height","clientHeight","viewport","drawingBufferWidth","drawingBufferHeight","updateAspectRatio","cancelAnimationFrame","glObjects","programs","defaultTexture","WebGL","createTexture","Uint8Array","g","DEPTH_TEST","CULL_FACE","program","buildProgram","vertex","createVertexShader","fragment","createFragmentShader","DataView","glBuffer","createBuffer","target","glSampler","createSampler","glTexture","prepareSampler","prepareImage","mipmapModes","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","includes","bindTexture","TEXTURE_2D","generateMipmap","prepareShaderMaterial","prepareTexture","numberOfLights","fragmentShader","prepareMaterial","vao","createVertexArray","bindVertexArray","ELEMENT_ARRAY_BUFFER","prepareBufferView","bindBuffer","attributeNameToIndexLookup","typedName","attributeIndex","ARRAY_BUFFER","enableVertexAttribArray","vertexAttribPointer","preparePrimitive","prepareMesh","prepare3dObject","preparePrograms","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","viewModelMatrix","modelMatrix","modelViewMatrixStack","modelMatrixStack","viewMatrix","invert","copy","lightCount","renderLight","renderObject3D","viewModel","model","lightIndex","defaultProgram","arrayParamName","uniform3fv","uniforms","uniform1i","stringify","getLightType","uniform1f","object3d","matrices","uniformMatrix4fv","uModel","uViewModel","renderPrimitive","useProgram","uProjection","uTexture","uniform4fv","uBaseColorFactor","uniformMatrix3fv","uBaseColorTransform","setShaderUniformValues","activeTexture","TEXTURE0","bindSampler","drawElements","drawArrays","uniform","func","webGLName","getGlUniformParamNames","endsWith","uniformName","indexedNames","createProgram","createShader","VERTEX_SHADER","FRAGMENT_SHADER","shaders","shader","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","activeAttributes","ACTIVE_ATTRIBUTES","info","getActiveAttrib","getAttribLocation","activeUniforms","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","size","replace","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","iformat","RGBA","format","UNSIGNED_BYTE","unit","texImage2D","texParameteri","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","mip","hint","STATIC_DRAW","bufferData","samplerParameteri","trim","ShaderMaterial","TestScene","gltfLoader","GLTFLoader","gltfScene","loadScene","floorMaterial","gltfWalls","wall","addNode","gltfFloor","Floor","movableObjectMaterial","Cube","addContactMaterial","ContactMaterial","friction","restitution","obj","path","parts","split","reverse","CubePrimitive","Box","createCubeVertices","Trimesh","float32View","Float32Array","BYTES_PER_ELEMENT","Array","from","getVertices","uint16View","Uint16Array","getIndices","setFromEuler","Plane","labyrinthMeshLoader","labyrinthMeshScene","keyMeshLoader","keyMeshScene","door","findNodesByName","keyMesh","propMaterial","wallMaterial","playerMaterial","winDoor","Door","Sky","labyrinthMesh","generateKey","randomPosition","getRandomKeyWorldPosition","aabb","Key","COLLIDE_EVENT_NAME","handlePlayerCollision","scheduleGameLostIn","setKeysFound","worldAabb","getRandomVector","lowerBound","upperBound","getRandomScalar","random","event","keyTarget","doorTarget","despawn","pickupKey","hasWon","showWinScreen","maxGameDurationInS","secondsLeft","timer","setInterval","setTimeLeft","clearInterval","showLoseScreen","scaledDimensions","vmul","setMaterial"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n \tfunction hotDisposeChunk(chunkId) {\n \t\tdelete installedChunks[chunkId];\n \t}\n \tvar parentHotUpdateCallback = window[\"webpackHotUpdate\"];\n \twindow[\"webpackHotUpdate\"] = // eslint-disable-next-line no-unused-vars\n \tfunction webpackHotUpdateCallback(chunkId, moreModules) {\n \t\thotAddUpdateChunk(chunkId, moreModules);\n \t\tif (parentHotUpdateCallback) parentHotUpdateCallback(chunkId, moreModules);\n \t} ;\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadUpdateChunk(chunkId) {\n \t\tvar script = document.createElement(\"script\");\n \t\tscript.charset = \"utf-8\";\n \t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".\" + hotCurrentHash + \".hot-update.js\";\n \t\tif (null) script.crossOrigin = null;\n \t\tdocument.head.appendChild(script);\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadManifest(requestTimeout) {\n \t\trequestTimeout = requestTimeout || 10000;\n \t\treturn new Promise(function(resolve, reject) {\n \t\t\tif (typeof XMLHttpRequest === \"undefined\") {\n \t\t\t\treturn reject(new Error(\"No browser support\"));\n \t\t\t}\n \t\t\ttry {\n \t\t\t\tvar request = new XMLHttpRequest();\n \t\t\t\tvar requestPath = __webpack_require__.p + \"\" + hotCurrentHash + \".hot-update.json\";\n \t\t\t\trequest.open(\"GET\", requestPath, true);\n \t\t\t\trequest.timeout = requestTimeout;\n \t\t\t\trequest.send(null);\n \t\t\t} catch (err) {\n \t\t\t\treturn reject(err);\n \t\t\t}\n \t\t\trequest.onreadystatechange = function() {\n \t\t\t\tif (request.readyState !== 4) return;\n \t\t\t\tif (request.status === 0) {\n \t\t\t\t\t// timeout\n \t\t\t\t\treject(\n \t\t\t\t\t\tnew Error(\"Manifest request to \" + requestPath + \" timed out.\")\n \t\t\t\t\t);\n \t\t\t\t} else if (request.status === 404) {\n \t\t\t\t\t// no update available\n \t\t\t\t\tresolve();\n \t\t\t\t} else if (request.status !== 200 && request.status !== 304) {\n \t\t\t\t\t// other failure\n \t\t\t\t\treject(new Error(\"Manifest request to \" + requestPath + \" failed.\"));\n \t\t\t\t} else {\n \t\t\t\t\t// success\n \t\t\t\t\ttry {\n \t\t\t\t\t\tvar update = JSON.parse(request.responseText);\n \t\t\t\t\t} catch (e) {\n \t\t\t\t\t\treject(e);\n \t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t\tresolve(update);\n \t\t\t\t}\n \t\t\t};\n \t\t});\n \t}\n\n \tvar hotApplyOnUpdate = true;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentHash = \"7ddd00ff2b3027335812\";\n \tvar hotRequestTimeout = 10000;\n \tvar hotCurrentModuleData = {};\n \tvar hotCurrentChildModule;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParents = [];\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParentsTemp = [];\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateRequire(moduleId) {\n \t\tvar me = installedModules[moduleId];\n \t\tif (!me) return __webpack_require__;\n \t\tvar fn = function(request) {\n \t\t\tif (me.hot.active) {\n \t\t\t\tif (installedModules[request]) {\n \t\t\t\t\tif (installedModules[request].parents.indexOf(moduleId) === -1) {\n \t\t\t\t\t\tinstalledModules[request].parents.push(moduleId);\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\thotCurrentParents = [moduleId];\n \t\t\t\t\thotCurrentChildModule = request;\n \t\t\t\t}\n \t\t\t\tif (me.children.indexOf(request) === -1) {\n \t\t\t\t\tme.children.push(request);\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\tconsole.warn(\n \t\t\t\t\t\"[HMR] unexpected require(\" +\n \t\t\t\t\t\trequest +\n \t\t\t\t\t\t\") from disposed module \" +\n \t\t\t\t\t\tmoduleId\n \t\t\t\t);\n \t\t\t\thotCurrentParents = [];\n \t\t\t}\n \t\t\treturn __webpack_require__(request);\n \t\t};\n \t\tvar ObjectFactory = function ObjectFactory(name) {\n \t\t\treturn {\n \t\t\t\tconfigurable: true,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: function() {\n \t\t\t\t\treturn __webpack_require__[name];\n \t\t\t\t},\n \t\t\t\tset: function(value) {\n \t\t\t\t\t__webpack_require__[name] = value;\n \t\t\t\t}\n \t\t\t};\n \t\t};\n \t\tfor (var name in __webpack_require__) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(__webpack_require__, name) &&\n \t\t\t\tname !== \"e\" &&\n \t\t\t\tname !== \"t\"\n \t\t\t) {\n \t\t\t\tObject.defineProperty(fn, name, ObjectFactory(name));\n \t\t\t}\n \t\t}\n \t\tfn.e = function(chunkId) {\n \t\t\tif (hotStatus === \"ready\") hotSetStatus(\"prepare\");\n \t\t\thotChunksLoading++;\n \t\t\treturn __webpack_require__.e(chunkId).then(finishChunkLoading, function(err) {\n \t\t\t\tfinishChunkLoading();\n \t\t\t\tthrow err;\n \t\t\t});\n\n \t\t\tfunction finishChunkLoading() {\n \t\t\t\thotChunksLoading--;\n \t\t\t\tif (hotStatus === \"prepare\") {\n \t\t\t\t\tif (!hotWaitingFilesMap[chunkId]) {\n \t\t\t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t\t\t}\n \t\t\t\t\tif (hotChunksLoading === 0 && hotWaitingFiles === 0) {\n \t\t\t\t\t\thotUpdateDownloaded();\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t};\n \t\tfn.t = function(value, mode) {\n \t\t\tif (mode & 1) value = fn(value);\n \t\t\treturn __webpack_require__.t(value, mode & ~1);\n \t\t};\n \t\treturn fn;\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateModule(moduleId) {\n \t\tvar hot = {\n \t\t\t// private stuff\n \t\t\t_acceptedDependencies: {},\n \t\t\t_declinedDependencies: {},\n \t\t\t_selfAccepted: false,\n \t\t\t_selfDeclined: false,\n \t\t\t_selfInvalidated: false,\n \t\t\t_disposeHandlers: [],\n \t\t\t_main: hotCurrentChildModule !== moduleId,\n\n \t\t\t// Module API\n \t\t\tactive: true,\n \t\t\taccept: function(dep, callback) {\n \t\t\t\tif (dep === undefined) hot._selfAccepted = true;\n \t\t\t\telse if (typeof dep === \"function\") hot._selfAccepted = dep;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._acceptedDependencies[dep[i]] = callback || function() {};\n \t\t\t\telse hot._acceptedDependencies[dep] = callback || function() {};\n \t\t\t},\n \t\t\tdecline: function(dep) {\n \t\t\t\tif (dep === undefined) hot._selfDeclined = true;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._declinedDependencies[dep[i]] = true;\n \t\t\t\telse hot._declinedDependencies[dep] = true;\n \t\t\t},\n \t\t\tdispose: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\taddDisposeHandler: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\tremoveDisposeHandler: function(callback) {\n \t\t\t\tvar idx = hot._disposeHandlers.indexOf(callback);\n \t\t\t\tif (idx >= 0) hot._disposeHandlers.splice(idx, 1);\n \t\t\t},\n \t\t\tinvalidate: function() {\n \t\t\t\tthis._selfInvalidated = true;\n \t\t\t\tswitch (hotStatus) {\n \t\t\t\t\tcase \"idle\":\n \t\t\t\t\t\thotUpdate = {};\n \t\t\t\t\t\thotUpdate[moduleId] = modules[moduleId];\n \t\t\t\t\t\thotSetStatus(\"ready\");\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"ready\":\n \t\t\t\t\t\thotApplyInvalidatedModule(moduleId);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"prepare\":\n \t\t\t\t\tcase \"check\":\n \t\t\t\t\tcase \"dispose\":\n \t\t\t\t\tcase \"apply\":\n \t\t\t\t\t\t(hotQueuedInvalidatedModules =\n \t\t\t\t\t\t\thotQueuedInvalidatedModules || []).push(moduleId);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tdefault:\n \t\t\t\t\t\t// ignore requests in error states\n \t\t\t\t\t\tbreak;\n \t\t\t\t}\n \t\t\t},\n\n \t\t\t// Management API\n \t\t\tcheck: hotCheck,\n \t\t\tapply: hotApply,\n \t\t\tstatus: function(l) {\n \t\t\t\tif (!l) return hotStatus;\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\taddStatusHandler: function(l) {\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\tremoveStatusHandler: function(l) {\n \t\t\t\tvar idx = hotStatusHandlers.indexOf(l);\n \t\t\t\tif (idx >= 0) hotStatusHandlers.splice(idx, 1);\n \t\t\t},\n\n \t\t\t//inherit from previous dispose call\n \t\t\tdata: hotCurrentModuleData[moduleId]\n \t\t};\n \t\thotCurrentChildModule = undefined;\n \t\treturn hot;\n \t}\n\n \tvar hotStatusHandlers = [];\n \tvar hotStatus = \"idle\";\n\n \tfunction hotSetStatus(newStatus) {\n \t\thotStatus = newStatus;\n \t\tfor (var i = 0; i < hotStatusHandlers.length; i++)\n \t\t\thotStatusHandlers[i].call(null, newStatus);\n \t}\n\n \t// while downloading\n \tvar hotWaitingFiles = 0;\n \tvar hotChunksLoading = 0;\n \tvar hotWaitingFilesMap = {};\n \tvar hotRequestedFilesMap = {};\n \tvar hotAvailableFilesMap = {};\n \tvar hotDeferred;\n\n \t// The update info\n \tvar hotUpdate, hotUpdateNewHash, hotQueuedInvalidatedModules;\n\n \tfunction toModuleId(id) {\n \t\tvar isNumber = +id + \"\" === id;\n \t\treturn isNumber ? +id : id;\n \t}\n\n \tfunction hotCheck(apply) {\n \t\tif (hotStatus !== \"idle\") {\n \t\t\tthrow new Error(\"check() is only allowed in idle status\");\n \t\t}\n \t\thotApplyOnUpdate = apply;\n \t\thotSetStatus(\"check\");\n \t\treturn hotDownloadManifest(hotRequestTimeout).then(function(update) {\n \t\t\tif (!update) {\n \t\t\t\thotSetStatus(hotApplyInvalidatedModules() ? \"ready\" : \"idle\");\n \t\t\t\treturn null;\n \t\t\t}\n \t\t\thotRequestedFilesMap = {};\n \t\t\thotWaitingFilesMap = {};\n \t\t\thotAvailableFilesMap = update.c;\n \t\t\thotUpdateNewHash = update.h;\n\n \t\t\thotSetStatus(\"prepare\");\n \t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\thotDeferred = {\n \t\t\t\t\tresolve: resolve,\n \t\t\t\t\treject: reject\n \t\t\t\t};\n \t\t\t});\n \t\t\thotUpdate = {};\n \t\t\tfor(var chunkId in installedChunks)\n \t\t\t// eslint-disable-next-line no-lone-blocks\n \t\t\t{\n \t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t}\n \t\t\tif (\n \t\t\t\thotStatus === \"prepare\" &&\n \t\t\t\thotChunksLoading === 0 &&\n \t\t\t\thotWaitingFiles === 0\n \t\t\t) {\n \t\t\t\thotUpdateDownloaded();\n \t\t\t}\n \t\t\treturn promise;\n \t\t});\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotAddUpdateChunk(chunkId, moreModules) {\n \t\tif (!hotAvailableFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])\n \t\t\treturn;\n \t\thotRequestedFilesMap[chunkId] = false;\n \t\tfor (var moduleId in moreModules) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\thotUpdate[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif (--hotWaitingFiles === 0 && hotChunksLoading === 0) {\n \t\t\thotUpdateDownloaded();\n \t\t}\n \t}\n\n \tfunction hotEnsureUpdateChunk(chunkId) {\n \t\tif (!hotAvailableFilesMap[chunkId]) {\n \t\t\thotWaitingFilesMap[chunkId] = true;\n \t\t} else {\n \t\t\thotRequestedFilesMap[chunkId] = true;\n \t\t\thotWaitingFiles++;\n \t\t\thotDownloadUpdateChunk(chunkId);\n \t\t}\n \t}\n\n \tfunction hotUpdateDownloaded() {\n \t\thotSetStatus(\"ready\");\n \t\tvar deferred = hotDeferred;\n \t\thotDeferred = null;\n \t\tif (!deferred) return;\n \t\tif (hotApplyOnUpdate) {\n \t\t\t// Wrap deferred object in Promise to mark it as a well-handled Promise to\n \t\t\t// avoid triggering uncaught exception warning in Chrome.\n \t\t\t// See https://bugs.chromium.org/p/chromium/issues/detail?id=465666\n \t\t\tPromise.resolve()\n \t\t\t\t.then(function() {\n \t\t\t\t\treturn hotApply(hotApplyOnUpdate);\n \t\t\t\t})\n \t\t\t\t.then(\n \t\t\t\t\tfunction(result) {\n \t\t\t\t\t\tdeferred.resolve(result);\n \t\t\t\t\t},\n \t\t\t\t\tfunction(err) {\n \t\t\t\t\t\tdeferred.reject(err);\n \t\t\t\t\t}\n \t\t\t\t);\n \t\t} else {\n \t\t\tvar outdatedModules = [];\n \t\t\tfor (var id in hotUpdate) {\n \t\t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\t\toutdatedModules.push(toModuleId(id));\n \t\t\t\t}\n \t\t\t}\n \t\t\tdeferred.resolve(outdatedModules);\n \t\t}\n \t}\n\n \tfunction hotApply(options) {\n \t\tif (hotStatus !== \"ready\")\n \t\t\tthrow new Error(\"apply() is only allowed in ready status\");\n \t\toptions = options || {};\n \t\treturn hotApplyInternal(options);\n \t}\n\n \tfunction hotApplyInternal(options) {\n \t\thotApplyInvalidatedModules();\n\n \t\tvar cb;\n \t\tvar i;\n \t\tvar j;\n \t\tvar module;\n \t\tvar moduleId;\n\n \t\tfunction getAffectedStuff(updateModuleId) {\n \t\t\tvar outdatedModules = [updateModuleId];\n \t\t\tvar outdatedDependencies = {};\n\n \t\t\tvar queue = outdatedModules.map(function(id) {\n \t\t\t\treturn {\n \t\t\t\t\tchain: [id],\n \t\t\t\t\tid: id\n \t\t\t\t};\n \t\t\t});\n \t\t\twhile (queue.length > 0) {\n \t\t\t\tvar queueItem = queue.pop();\n \t\t\t\tvar moduleId = queueItem.id;\n \t\t\t\tvar chain = queueItem.chain;\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (\n \t\t\t\t\t!module ||\n \t\t\t\t\t(module.hot._selfAccepted && !module.hot._selfInvalidated)\n \t\t\t\t)\n \t\t\t\t\tcontinue;\n \t\t\t\tif (module.hot._selfDeclined) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"self-declined\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tif (module.hot._main) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"unaccepted\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tfor (var i = 0; i < module.parents.length; i++) {\n \t\t\t\t\tvar parentId = module.parents[i];\n \t\t\t\t\tvar parent = installedModules[parentId];\n \t\t\t\t\tif (!parent) continue;\n \t\t\t\t\tif (parent.hot._declinedDependencies[moduleId]) {\n \t\t\t\t\t\treturn {\n \t\t\t\t\t\t\ttype: \"declined\",\n \t\t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\tparentId: parentId\n \t\t\t\t\t\t};\n \t\t\t\t\t}\n \t\t\t\t\tif (outdatedModules.indexOf(parentId) !== -1) continue;\n \t\t\t\t\tif (parent.hot._acceptedDependencies[moduleId]) {\n \t\t\t\t\t\tif (!outdatedDependencies[parentId])\n \t\t\t\t\t\t\toutdatedDependencies[parentId] = [];\n \t\t\t\t\t\taddAllToSet(outdatedDependencies[parentId], [moduleId]);\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n \t\t\t\t\tdelete outdatedDependencies[parentId];\n \t\t\t\t\toutdatedModules.push(parentId);\n \t\t\t\t\tqueue.push({\n \t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\tid: parentId\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t}\n\n \t\t\treturn {\n \t\t\t\ttype: \"accepted\",\n \t\t\t\tmoduleId: updateModuleId,\n \t\t\t\toutdatedModules: outdatedModules,\n \t\t\t\toutdatedDependencies: outdatedDependencies\n \t\t\t};\n \t\t}\n\n \t\tfunction addAllToSet(a, b) {\n \t\t\tfor (var i = 0; i < b.length; i++) {\n \t\t\t\tvar item = b[i];\n \t\t\t\tif (a.indexOf(item) === -1) a.push(item);\n \t\t\t}\n \t\t}\n\n \t\t// at begin all updates modules are outdated\n \t\t// the \"outdated\" status can propagate to parents if they don't accept the children\n \t\tvar outdatedDependencies = {};\n \t\tvar outdatedModules = [];\n \t\tvar appliedUpdate = {};\n\n \t\tvar warnUnexpectedRequire = function warnUnexpectedRequire() {\n \t\t\tconsole.warn(\n \t\t\t\t\"[HMR] unexpected require(\" + result.moduleId + \") to disposed module\"\n \t\t\t);\n \t\t};\n\n \t\tfor (var id in hotUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\tmoduleId = toModuleId(id);\n \t\t\t\t/** @type {TODO} */\n \t\t\t\tvar result;\n \t\t\t\tif (hotUpdate[id]) {\n \t\t\t\t\tresult = getAffectedStuff(moduleId);\n \t\t\t\t} else {\n \t\t\t\t\tresult = {\n \t\t\t\t\t\ttype: \"disposed\",\n \t\t\t\t\t\tmoduleId: id\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\t/** @type {Error|false} */\n \t\t\t\tvar abortError = false;\n \t\t\t\tvar doApply = false;\n \t\t\t\tvar doDispose = false;\n \t\t\t\tvar chainInfo = \"\";\n \t\t\t\tif (result.chain) {\n \t\t\t\t\tchainInfo = \"\\nUpdate propagation: \" + result.chain.join(\" -> \");\n \t\t\t\t}\n \t\t\t\tswitch (result.type) {\n \t\t\t\t\tcase \"self-declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of self decline: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of declined dependency: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\t\" in \" +\n \t\t\t\t\t\t\t\t\tresult.parentId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"unaccepted\":\n \t\t\t\t\t\tif (options.onUnaccepted) options.onUnaccepted(result);\n \t\t\t\t\t\tif (!options.ignoreUnaccepted)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because \" + moduleId + \" is not accepted\" + chainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"accepted\":\n \t\t\t\t\t\tif (options.onAccepted) options.onAccepted(result);\n \t\t\t\t\t\tdoApply = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"disposed\":\n \t\t\t\t\t\tif (options.onDisposed) options.onDisposed(result);\n \t\t\t\t\t\tdoDispose = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tdefault:\n \t\t\t\t\t\tthrow new Error(\"Unexception type \" + result.type);\n \t\t\t\t}\n \t\t\t\tif (abortError) {\n \t\t\t\t\thotSetStatus(\"abort\");\n \t\t\t\t\treturn Promise.reject(abortError);\n \t\t\t\t}\n \t\t\t\tif (doApply) {\n \t\t\t\t\tappliedUpdate[moduleId] = hotUpdate[moduleId];\n \t\t\t\t\taddAllToSet(outdatedModules, result.outdatedModules);\n \t\t\t\t\tfor (moduleId in result.outdatedDependencies) {\n \t\t\t\t\t\tif (\n \t\t\t\t\t\t\tObject.prototype.hasOwnProperty.call(\n \t\t\t\t\t\t\t\tresult.outdatedDependencies,\n \t\t\t\t\t\t\t\tmoduleId\n \t\t\t\t\t\t\t)\n \t\t\t\t\t\t) {\n \t\t\t\t\t\t\tif (!outdatedDependencies[moduleId])\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId] = [];\n \t\t\t\t\t\t\taddAllToSet(\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId],\n \t\t\t\t\t\t\t\tresult.outdatedDependencies[moduleId]\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tif (doDispose) {\n \t\t\t\t\taddAllToSet(outdatedModules, [result.moduleId]);\n \t\t\t\t\tappliedUpdate[moduleId] = warnUnexpectedRequire;\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Store self accepted outdated modules to require them later by the module system\n \t\tvar outdatedSelfAcceptedModules = [];\n \t\tfor (i = 0; i < outdatedModules.length; i++) {\n \t\t\tmoduleId = outdatedModules[i];\n \t\t\tif (\n \t\t\t\tinstalledModules[moduleId] &&\n \t\t\t\tinstalledModules[moduleId].hot._selfAccepted &&\n \t\t\t\t// removed self-accepted modules should not be required\n \t\t\t\tappliedUpdate[moduleId] !== warnUnexpectedRequire &&\n \t\t\t\t// when called invalidate self-accepting is not possible\n \t\t\t\t!installedModules[moduleId].hot._selfInvalidated\n \t\t\t) {\n \t\t\t\toutdatedSelfAcceptedModules.push({\n \t\t\t\t\tmodule: moduleId,\n \t\t\t\t\tparents: installedModules[moduleId].parents.slice(),\n \t\t\t\t\terrorHandler: installedModules[moduleId].hot._selfAccepted\n \t\t\t\t});\n \t\t\t}\n \t\t}\n\n \t\t// Now in \"dispose\" phase\n \t\thotSetStatus(\"dispose\");\n \t\tObject.keys(hotAvailableFilesMap).forEach(function(chunkId) {\n \t\t\tif (hotAvailableFilesMap[chunkId] === false) {\n \t\t\t\thotDisposeChunk(chunkId);\n \t\t\t}\n \t\t});\n\n \t\tvar idx;\n \t\tvar queue = outdatedModules.slice();\n \t\twhile (queue.length > 0) {\n \t\t\tmoduleId = queue.pop();\n \t\t\tmodule = installedModules[moduleId];\n \t\t\tif (!module) continue;\n\n \t\t\tvar data = {};\n\n \t\t\t// Call dispose handlers\n \t\t\tvar disposeHandlers = module.hot._disposeHandlers;\n \t\t\tfor (j = 0; j < disposeHandlers.length; j++) {\n \t\t\t\tcb = disposeHandlers[j];\n \t\t\t\tcb(data);\n \t\t\t}\n \t\t\thotCurrentModuleData[moduleId] = data;\n\n \t\t\t// disable module (this disables requires from this module)\n \t\t\tmodule.hot.active = false;\n\n \t\t\t// remove module from cache\n \t\t\tdelete installedModules[moduleId];\n\n \t\t\t// when disposing there is no need to call dispose handler\n \t\t\tdelete outdatedDependencies[moduleId];\n\n \t\t\t// remove \"parents\" references from all children\n \t\t\tfor (j = 0; j < module.children.length; j++) {\n \t\t\t\tvar child = installedModules[module.children[j]];\n \t\t\t\tif (!child) continue;\n \t\t\t\tidx = child.parents.indexOf(moduleId);\n \t\t\t\tif (idx >= 0) {\n \t\t\t\t\tchild.parents.splice(idx, 1);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// remove outdated dependency from module children\n \t\tvar dependency;\n \t\tvar moduleOutdatedDependencies;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tfor (j = 0; j < moduleOutdatedDependencies.length; j++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[j];\n \t\t\t\t\t\tidx = module.children.indexOf(dependency);\n \t\t\t\t\t\tif (idx >= 0) module.children.splice(idx, 1);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Now in \"apply\" phase\n \t\thotSetStatus(\"apply\");\n\n \t\tif (hotUpdateNewHash !== undefined) {\n \t\t\thotCurrentHash = hotUpdateNewHash;\n \t\t\thotUpdateNewHash = undefined;\n \t\t}\n \t\thotUpdate = undefined;\n\n \t\t// insert new code\n \t\tfor (moduleId in appliedUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {\n \t\t\t\tmodules[moduleId] = appliedUpdate[moduleId];\n \t\t\t}\n \t\t}\n\n \t\t// call accept handlers\n \t\tvar error = null;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tvar callbacks = [];\n \t\t\t\t\tfor (i = 0; i < moduleOutdatedDependencies.length; i++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[i];\n \t\t\t\t\t\tcb = module.hot._acceptedDependencies[dependency];\n \t\t\t\t\t\tif (cb) {\n \t\t\t\t\t\t\tif (callbacks.indexOf(cb) !== -1) continue;\n \t\t\t\t\t\t\tcallbacks.push(cb);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t\tfor (i = 0; i < callbacks.length; i++) {\n \t\t\t\t\t\tcb = callbacks[i];\n \t\t\t\t\t\ttry {\n \t\t\t\t\t\t\tcb(moduleOutdatedDependencies);\n \t\t\t\t\t\t} catch (err) {\n \t\t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\t\ttype: \"accept-errored\",\n \t\t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\t\tdependencyId: moduleOutdatedDependencies[i],\n \t\t\t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Load self accepted modules\n \t\tfor (i = 0; i < outdatedSelfAcceptedModules.length; i++) {\n \t\t\tvar item = outdatedSelfAcceptedModules[i];\n \t\t\tmoduleId = item.module;\n \t\t\thotCurrentParents = item.parents;\n \t\t\thotCurrentChildModule = moduleId;\n \t\t\ttry {\n \t\t\t\t__webpack_require__(moduleId);\n \t\t\t} catch (err) {\n \t\t\t\tif (typeof item.errorHandler === \"function\") {\n \t\t\t\t\ttry {\n \t\t\t\t\t\titem.errorHandler(err);\n \t\t\t\t\t} catch (err2) {\n \t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\ttype: \"self-accept-error-handler-errored\",\n \t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\terror: err2,\n \t\t\t\t\t\t\t\toriginalError: err\n \t\t\t\t\t\t\t});\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\tif (!error) error = err2;\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\ttype: \"self-accept-errored\",\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t});\n \t\t\t\t\t}\n \t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// handle errors in accept handlers and self accepted module load\n \t\tif (error) {\n \t\t\thotSetStatus(\"fail\");\n \t\t\treturn Promise.reject(error);\n \t\t}\n\n \t\tif (hotQueuedInvalidatedModules) {\n \t\t\treturn hotApplyInternal(options).then(function(list) {\n \t\t\t\toutdatedModules.forEach(function(moduleId) {\n \t\t\t\t\tif (list.indexOf(moduleId) < 0) list.push(moduleId);\n \t\t\t\t});\n \t\t\t\treturn list;\n \t\t\t});\n \t\t}\n\n \t\thotSetStatus(\"idle\");\n \t\treturn new Promise(function(resolve) {\n \t\t\tresolve(outdatedModules);\n \t\t});\n \t}\n\n \tfunction hotApplyInvalidatedModules() {\n \t\tif (hotQueuedInvalidatedModules) {\n \t\t\tif (!hotUpdate) hotUpdate = {};\n \t\t\thotQueuedInvalidatedModules.forEach(hotApplyInvalidatedModule);\n \t\t\thotQueuedInvalidatedModules = undefined;\n \t\t\treturn true;\n \t\t}\n \t}\n\n \tfunction hotApplyInvalidatedModule(moduleId) {\n \t\tif (!Object.prototype.hasOwnProperty.call(hotUpdate, moduleId))\n \t\t\thotUpdate[moduleId] = modules[moduleId];\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {},\n \t\t\thot: hotCreateModule(moduleId),\n \t\t\tparents: (hotCurrentParentsTemp = hotCurrentParents, hotCurrentParents = [], hotCurrentParentsTemp),\n \t\t\tchildren: []\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// __webpack_hash__\n \t__webpack_require__.h = function() { return hotCurrentHash; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([28,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import {Object3D, Object3DOptions} from \"../../engine/core/Object3D\";\nimport * as CANNON from \"cannon-es\";\n\nexport type GameObjectOptions = Object3DOptions;\n\n/**\n * Should be extended by all objects in the game scene.\n */\nexport abstract class GameObject extends Object3D {\n    /**\n     * Physics body used for simulation.\n     *\n     * This object's state is automatically updated before `this.update` is called.\n     */\n    public abstract body?: CANNON.Body;\n\n    /**\n     * Asset loading and state initialization.\n     */\n    public abstract load(): Promise<void>;\n\n    /**\n     * Update code (input, animations, AI ...)\n     * @param dt Delta time from the last update frame.\n     * @param time Elapsed time since the call of `this.start`.\n     */\n    public abstract update(dt: number, time: number): void;\n}\n","import {vec3} from \"gl-matrix\";\nimport {Object3D, Object3DOptions} from \"../core/Object3D\";\n\nexport type LightOptions = Partial<Light> & Object3DOptions;\n\nexport class Light extends Object3D {\n  color: vec3;\n  intensity: number;\n\n  constructor(options: LightOptions = {}) {\n    super(options);\n    this.name = \"Light\";\n    this.color = options.color ?? [0, 0, 0];\n    this.intensity = options.intensity ?? 1;\n\n  }\n\n}\n","import { vec3, mat4, quat } from 'gl-matrix';\nimport {Mesh} from \"./Mesh\";\n\nexport type Object3DOptions = Partial<Omit<Object3D, \"parent\">>\n\nexport type TraversalOptions = {\n    onEnter?: (object: Object3D) => void;\n    onLeave?: (object: Object3D) => void;\n}\n\nexport class Object3D {\n    translation: vec3;\n    rotation: quat;\n    scale: vec3;\n    matrix: mat4;\n    children: Object3D[];\n    name: string;\n    parent: Object3D | null;\n    mesh: Mesh;\n\n    constructor(options: Object3DOptions = {}) {\n        this.name = options.name ?? \"Object3D\";\n\n        this.translation = options.translation\n            ? vec3.clone(options.translation)\n            : vec3.fromValues(0, 0, 0);\n        this.rotation = options.rotation\n            ? quat.clone(options.rotation)\n            : quat.fromValues(0, 0, 0, 1);\n        this.scale = options.scale\n            ? vec3.clone(options.scale)\n            : vec3.fromValues(1, 1, 1);\n        this.matrix = options.matrix\n            ? mat4.clone(options.matrix)\n            : mat4.create();\n\n        if (options.matrix) {\n            this.updateTransform();\n        } else if (options.translation || options.rotation || options.scale) {\n            this.updateMatrix();\n        }\n\n        this.mesh = options.mesh || null;\n\n        this.children = options.children ?? [];\n        for (const child of this.children) {\n            child.parent = this;\n        }\n        this.parent = null;\n    }\n\n    /**\n     * Traverses the current node and all it's descendants.\n     */\n    traverse(options: TraversalOptions) {\n        options?.onEnter?.(this);\n        for (const child of this.children) {\n            child.traverse(options);\n        }\n        options?.onLeave?.(this)\n    }\n\n    updateTransform() {\n        mat4.getRotation(this.rotation, this.matrix);\n        mat4.getTranslation(this.translation, this.matrix);\n        mat4.getScaling(this.scale, this.matrix);\n    }\n\n    updateMatrix() {\n        mat4.fromRotationTranslationScale(\n            this.matrix,\n            this.rotation,\n            this.translation,\n            this.scale);\n    }\n\n\n    getGlobalTransform(): mat4 {\n        if (!this.parent) {\n            return mat4.clone(this.matrix);\n        } else {\n            let transform = this.parent.getGlobalTransform();\n            return mat4.mul(transform, transform, this.matrix);\n        }\n    }\n\n    addChild(node: Object3D) {\n        this.children.push(node);\n        node.parent = this;\n    }\n\n    removeChild(node: Object3D) {\n        const index = this.children.indexOf(node);\n        if (index >= 0) {\n            this.children.splice(index, 1);\n            node.parent = null;\n        }\n    }\n\n    clone(): Object3D {\n        return new Object3D({\n            ...this,\n            children: this.children.map(child => child.clone()),\n        });\n    }\n\n}\n","import {mat3, vec3, vec4} from 'gl-matrix';\nimport {Texture} from \"../textures/Texture\";\n\nexport type MaterialOptions = Partial<Material>;\n\nexport class Material {\n    // TODO: Should we move these fields (tex coords, factor, transform) into a texture class?\n    baseColorTexture: Texture;\n    baseColorTexCoord: number;\n    baseColorFactor: vec4;\n    // TODO: For now this is only defined for base color, but it should apply to other material textures as well\n    baseColorTransform: mat3;\n\n    metallicRoughnessTexture: Texture;\n    metallicRoughnessTexCoord: number;\n    metallicFactor: number;\n    roughnessFactor: number;\n\n    normalTexture: Texture;\n    normalTexCoord: number;\n    normalFactor: number;\n\n    occlusionTexture: Texture;\n    occlusionTexCoord: number;\n    occlusionFactor: number;\n\n    emissiveTexture: Texture;\n    emissiveTexCoord: number;\n    emissiveFactor: vec3;\n\n    alphaMode: string;\n    alphaCutoff: number;\n    doubleSided: boolean;\n\n    constructor(options: MaterialOptions) {\n        this.baseColorTexture = options.baseColorTexture || null;\n        this.baseColorTexCoord = options.baseColorTexCoord || 0;\n        this.baseColorFactor = options.baseColorFactor\n            ? vec4.clone(options.baseColorFactor)\n            : vec4.fromValues(1, 1, 1, 1);\n        this.baseColorTransform = options.baseColorTransform ?? mat3.create();\n\n        this.metallicRoughnessTexture = options.metallicRoughnessTexture || null;\n        this.metallicRoughnessTexCoord = options.metallicRoughnessTexCoord || 0;\n        this.metallicFactor = options.metallicFactor !== undefined ? options.metallicFactor : 1;\n        this.roughnessFactor = options.roughnessFactor !== undefined ? options.roughnessFactor : 1;\n\n        this.normalTexture = options.normalTexture || null;\n        this.normalTexCoord = options.normalTexCoord || 0;\n        this.normalFactor = options.normalFactor !== undefined ? options.normalFactor : 1;\n\n        this.occlusionTexture = options.occlusionTexture || null;\n        this.occlusionTexCoord = options.occlusionTexCoord || 0;\n        this.occlusionFactor = options.occlusionFactor !== undefined ? options.occlusionFactor : 1;\n\n        this.emissiveTexture = options.emissiveTexture || null;\n        this.emissiveTexCoord = options.emissiveTexCoord || 0;\n        this.emissiveFactor = options.emissiveFactor\n            ? vec3.clone(options.emissiveFactor)\n            : vec3.fromValues(0, 0, 0);\n\n        this.alphaMode = options.alphaMode || 'OPAQUE';\n        this.alphaCutoff = options.alphaCutoff !== undefined ? options.alphaCutoff : 0.5;\n        this.doubleSided = options.doubleSided || false;\n    }\n\n}\n","import {GameObjectOptions} from \"../core/GameObject\";\nimport {PerspectiveCamera} from \"../../engine/cameras/PerspectiveCamera\";\nimport {quat, vec3} from \"gl-matrix\";\nimport * as CANNON from \"cannon-es\"\nimport {Sphere} from \"./Sphere\";\nimport { Key } from \"./Key\";\n\ntype PlayerOptions = GameObjectOptions & {\n    physicsMaterial: CANNON.Material;\n}\n\nexport class Player extends Sphere {\n    public body: CANNON.Body;\n    public controls: PlayerControls;\n    public camera: PerspectiveCamera;\n    public foundKeys: Key[];\n\n    constructor(options: PlayerOptions) {\n        super({\n            ...options,\n            name: \"Player\",\n            radius: 0.2,\n            mass: 10\n        });\n        this.camera = new PerspectiveCamera({\n            fov: 1.8,\n            // Must be small enough so that player can't see through walls when it touches them.\n            near: 0.05\n        });\n\n        this.addChild(this.camera);\n\n        this.foundKeys = [];\n    }\n\n\n    async load(): Promise<void> {\n        await super.load();\n\n        this.controls = new PlayerControls(this.body);\n    }\n\n    update(dt: number, time: number): void {\n        this.controls.update();\n        const [x,y,z] = this.controls.rotation.map((x: number) => x * 180 / Math.PI);\n        this.camera.rotation = quat.fromEuler(quat.create(), x, y, z);\n        this.camera.updateMatrix();\n        super.update(dt, time);\n    }\n\n    public pickupKey(key: Key) {\n        this.foundKeys.push(key);\n        // TODO: Maybe animate the key position and add it as a child node of player\n    }\n}\n\ntype PlayerControlsOptions = {\n    velocityFactor?: number,\n    mouseSensitivity?: number,\n}\n\nclass PlayerControls {\n    private readonly pressedKeys: { [key: string]: boolean };\n    public velocityFactor: number;\n    private mouseSensitivity: number;\n    public rotation: vec3 = [0,0,0]; // euler rotation vector with angles x,y,z\n\n    constructor (private readonly body: CANNON.Body, options: PlayerControlsOptions = {}) {\n        this.velocityFactor = options.velocityFactor ?? 0.04;\n        this.mouseSensitivity = options.mouseSensitivity || 0.01;\n\n        this.mousemoveHandler = this.mousemoveHandler.bind(this);\n        this.keydownHandler = this.keydownHandler.bind(this);\n        this.keyupHandler = this.keyupHandler.bind(this);\n        this.pressedKeys = {};\n    }\n\n    update () {\n        const { body, velocityFactor, rotation } = this;\n\n        const forward = vec3.fromValues(-Math.sin(rotation[1]), 0, -Math.cos(rotation[1]));\n        const right = vec3.fromValues(Math.cos(rotation[1]), 0, -Math.sin(rotation[1]));\n        const up = vec3.fromValues(0, 5, 0);\n\n        const inputVelocity = vec3.create();\n        if (this.pressedKeys['KeyW']) {\n            vec3.add(inputVelocity, inputVelocity, forward);\n        }\n        if (this.pressedKeys['KeyS']) {\n            vec3.sub(inputVelocity, inputVelocity, forward);\n        }\n        if (this.pressedKeys['KeyD']) {\n            vec3.add(inputVelocity, inputVelocity, right);\n        }\n        if (this.pressedKeys['KeyA']) {\n            vec3.sub(inputVelocity, inputVelocity, right);\n        }\n        if (this.pressedKeys['Space']) {\n            vec3.add(inputVelocity, inputVelocity, up);\n        }\n\n        vec3.scale(inputVelocity, inputVelocity, velocityFactor);\n\n\n        body.velocity = body.velocity.vadd(new CANNON.Vec3(...inputVelocity));\n    }\n\n    enable () {\n        document.addEventListener('mousemove', this.mousemoveHandler);\n        document.addEventListener('keydown', this.keydownHandler);\n        document.addEventListener('keyup', this.keyupHandler);\n    }\n\n    disable () {\n        document.removeEventListener('mousemove', this.mousemoveHandler);\n        document.removeEventListener('keydown', this.keydownHandler);\n        document.removeEventListener('keyup', this.keyupHandler);\n\n        for (let key in this.pressedKeys) {\n            this.pressedKeys[key] = false;\n        }\n    }\n\n    private mousemoveHandler (e: MouseEvent) {\n        const dx = e.movementX;\n        const dy = e.movementY;\n        const { rotation, mouseSensitivity } = this;\n\n        rotation[0] -= dy * mouseSensitivity;\n        rotation[1] -= dx * mouseSensitivity;\n\n        const pi = Math.PI;\n        const twopi = pi * 2;\n        const halfpi = pi / 2;\n\n        if (rotation[0] > halfpi) {\n            rotation[0] = halfpi;\n        }\n        if (rotation[0] < -halfpi) {\n            rotation[0] = -halfpi;\n        }\n\n        rotation[1] = ((rotation[1] % twopi) + twopi) % twopi;\n    }\n\n    private keydownHandler (e: KeyboardEvent) {\n        this.pressedKeys[e.code] = true;\n    }\n\n    private keyupHandler (e: KeyboardEvent) {\n        this.pressedKeys[e.code] = false;\n    }\n\n}\n","import { Primitive } from \"./Primitive\";\nimport { Material } from \"../materials/Material\";\n\nexport type MeshOptions = Partial<Mesh>;\n\nexport class Mesh {\n    primitives: Primitive[];\n\n    constructor(options?: MeshOptions) {\n        this.primitives = options.primitives ?? [];\n    }\n\n    setMaterial(material: Material) {\n        this.primitives.forEach(primitive => {\n            primitive.material = material;\n        })\n    }\n\n}\n","import {Light, LightOptions} from \"./Light\";\nimport {vec3} from \"gl-matrix\";\n\ntype AmbientLightOptions = Partial<LightOptions> & {\n    color?: vec3;\n}\n\nexport class AmbientLight extends Light {\n    constructor(options: AmbientLightOptions) {\n        super(options);\n        this.name = options.name ?? \"AmbientLight\";\n        this.color = options.color ?? [51, 51, 51];\n    }\n}\n","import {Light} from \"./Light\";\nimport {vec3} from \"gl-matrix\";\nimport {Object3DOptions} from \"../core/Object3D\";\n\nexport type DirectionalLightOptions = Object3DOptions & {\n    direction?: vec3;\n    color?: vec3;\n};\n\n// Default light direction is from top to bottom.\nconst defaultDirection: vec3 = [0, 1, 0];\n\nexport class DirectionalLight extends Light {\n    direction: vec3;\n\n    constructor(options: DirectionalLightOptions = {}) {\n        super(options);\n        this.name = \"DirectionalLight\";\n        this.color = options.color ?? [50, 50, 50];\n        this.direction = options.direction ?? defaultDirection;\n    }\n}\n","import {Light, LightOptions} from \"./Light\";\n\ntype PointLightOptions = LightOptions;\n\nexport class PointLight extends Light {\n    constructor(options: PointLightOptions) {\n        super(options);\n    }\n}\n","import {Scene} from \"../../engine/Scene\";\nimport {GameObject} from \"./GameObject\";\nimport * as CANNON from \"cannon-es\";\nimport {Player} from \"../objects/Player\";\n\nexport abstract class GameScene extends Scene {\n    world: CANNON.World;\n\n    constructor() {\n        super();\n        this.world = new CANNON.World({\n            gravity: new CANNON.Vec3(0, -9.82, 0),\n        });\n    }\n\n    /**\n     * Asset loading and state initialization.\n     * TODO: Separate loading and initialization stages.\n     */\n    public async start(): Promise<void> {\n        const loadPromises: Promise<void>[] = [];\n\n        this.traverse({\n            onEnter: node => {\n                if (node instanceof GameObject) {\n                    loadPromises.push(node.load());\n                }\n            }\n        });\n\n        // Finish for all load calls to complete before initializing world.\n        await Promise.all(loadPromises);\n\n        this.traverse({\n            onEnter: node => {\n                if (node instanceof GameObject && node.body) {\n                    // Object mesh and physics body should be initialized by now.\n                    this.world.addBody(node.body);\n                }\n            }\n        })\n    }\n\n    /**\n     * Update internal object state before rendering.\n     */\n    public update(dt: number, time: number): void {\n        this.world.fixedStep();\n\n        this.traverse({\n            onEnter: node => {\n                if (node instanceof GameObject) {\n                    node.update(dt, time);\n                }\n            }\n        })\n    }\n\n    public resize(aspectRatio: number): void {\n        this.traverse({\n            onEnter: node => {\n                if (node instanceof Player) {\n                    node.camera.aspect = aspectRatio;\n                    node.camera.updateMatrix();\n                }\n            }\n        })\n    }\n}\n","import {Object3D, TraversalOptions} from './core/Object3D.js';\n\nexport type SceneOptions = Partial<Scene>;\n\nexport class Scene {\n    nodes: Object3D[];\n\n    constructor(options?: SceneOptions) {\n        this.nodes = options?.nodes ?? [];\n    }\n\n    addNode(...node: Object3D[]) {\n        this.nodes.push(...node);\n    }\n\n    traverse(options: TraversalOptions) {\n        for (const node of this.nodes) {\n            node.traverse(options)\n        }\n    }\n\n    findNodesByName(name: string) {\n        const nodes: Object3D[] = [];\n        this.traverse({\n            onEnter: (object) => {\n                if (object.name === name) {\n                    nodes.push(object);\n                }\n            }\n        });\n        return nodes;\n    }\n\n    findNodesByNamePattern(regex: string) {\n        const nodes: Object3D[] = [];\n        this.traverse({\n            onEnter: (object) => {\n                if (new RegExp(regex).test(object.name)) {\n                    nodes.push(object);\n                }\n            }\n        });\n        return nodes;\n    }\n\n    findNodes(filter: (object: Object3D) => boolean) {\n        const nodes: Object3D[] = [];\n        this.traverse({\n            onEnter: (object) => {\n                if (filter(object)) {\n                    nodes.push(object);\n                }\n            }\n        });\n        return nodes;\n    }\n\n}\n","import {mat4} from \"gl-matrix\"\n\nimport {Camera, CameraOptions} from './Camera';\n\nexport type PerspectiveCameraOptions = CameraOptions & {\n    aspect?: number;\n    fov?: number;\n    near?: number;\n    far?: number;\n}\n\nexport class PerspectiveCamera extends Camera {\n    aspect: number;\n    fov: number;\n    near: number;\n    far: number;\n\n    constructor(options: PerspectiveCameraOptions = {}) {\n        super(options);\n\n        this.aspect = options.aspect ?? 1.5;\n        this.fov = options.fov ?? 1.5;\n        this.near = options.near ?? 0.1;\n        this.far = options.far ?? Infinity;\n        this.projection = mat4.create();\n\n        this.updateProjection();\n    }\n\n    updateProjection() {\n        mat4.perspective(this.projection,\n            this.fov, this.aspect,\n            this.near, this.far);\n    }\n\n}\n","import { mat4 } from \"gl-matrix\";\nimport {Object3D, Object3DOptions} from \"../core/Object3D\";\n\nexport type CameraOptions = Object3DOptions;\n\nexport abstract class Camera extends Object3D {\n  public projection: mat4;\n\n  protected constructor (options: CameraOptions = {}) {\n    super(options);\n    this.projection = mat4.create();\n  }\n\n  abstract updateProjection(): void;\n\n}\n","import {GameObject, GameObjectOptions} from \"../core/GameObject\";\nimport {Mesh} from \"../../engine/core/Mesh\";\nimport {SpherePrimitive} from \"../../engine/geometries/SpherePrimitive\";\nimport * as CANNON from \"cannon-es\";\n\nexport type SphereOptions = GameObjectOptions & {\n    physicsMaterial: CANNON.Material;\n    radius: number;\n    mass?: number;\n}\n\nexport class Sphere extends GameObject {\n    public body: CANNON.Body;\n    private readonly physicsMaterial: CANNON.Material;\n    private readonly radius: number;\n    private readonly mass: number;\n\n    constructor(options: SphereOptions) {\n        super(options);\n        this.name = options.name ?? \"Sphere\";\n        this.physicsMaterial = options.physicsMaterial;\n        this.radius = options.radius;\n        this.mass = options.mass ?? 0.1;\n    }\n\n    async load(): Promise<void> {\n\n        this.mesh = new Mesh({\n            primitives: [\n                new SpherePrimitive({\n                    radius: this.radius,\n                    subdivisionsHeight: 100,\n                    subdivisionsAxis: 100\n                })\n            ]\n        });\n\n        this.body = new CANNON.Body({\n            mass: this.mass,\n            material: this.physicsMaterial,\n            shape: new CANNON.Sphere(this.radius),\n            position: new CANNON.Vec3(...this.translation),\n            quaternion: new CANNON.Quaternion(...this.rotation),\n        });\n    }\n\n    update(dt: number, time: number): void {\n        this.translation = this.body.position.toArray();\n        // this.rotation = this.body.quaternion.toArray();\n        this.updateMatrix();\n    }\n\n}\n","import {primitives} from \"twgl.js\";\nimport {TwglPrimitive} from \"./TwglPrimitive\";\nimport {PrimitiveOptions} from \"../core/Primitive\";\n\ntype SphereGeometryOptions = PrimitiveOptions & {\n    radius: number;\n    // Number of steps around the sphere\n    subdivisionsAxis: number;\n    // Number of steps vertically on the sphere.\n    subdivisionsHeight: number;\n}\n\n\nexport class SpherePrimitive extends TwglPrimitive {\n    constructor(options: SphereGeometryOptions) {\n        super({\n            ...options,\n            vertices: primitives.createSphereVertices(\n                options.radius,\n                options.subdivisionsAxis,\n                options.subdivisionsHeight\n            )\n        });\n    }\n}\n","import { Accessor } from \"../core/Accessor\";\nimport { BufferView } from \"../core/BufferView\";\nimport {Primitive, PrimitiveAttributeName, PrimitiveOptions} from \"../core/Primitive\";\n\ntype TypedArray = Int8Array | Uint8Array | Int16Array | Uint16Array | Int32Array | Uint32Array | Float32Array;\ntype TwglVertices = Record<string, TypedArray>;\n\nexport type TwglPrimitiveOptions = PrimitiveOptions & {\n    vertices: TwglVertices;\n}\n\n/**\n * Internal primitive helper.\n */\nexport class TwglPrimitive extends Primitive {\n    constructor(options: TwglPrimitiveOptions) {\n        const {vertices, ...primitiveOptions} = options;\n        // See: https://github.com/greggman/twgl.js/blob/956fafcb74dcfbd6e667b4aa23cee09b8cfaa690/src/primitives.js#L567-L640\n        const attributes: Record<PrimitiveAttributeName, Accessor> = {\n            POSITION: new Accessor({\n                numComponents: 3,\n                componentType: 5126,\n                count: vertices.position.length,\n                bufferView: bufferViewFromTypedArray(vertices.position as never)\n            }),\n            NORMAL: new Accessor({\n                numComponents: 3,\n                componentType: 5126,\n                count: vertices.normal.length,\n                bufferView: bufferViewFromTypedArray(vertices.normal as never)\n            }),\n            TEXCOORD_0: new Accessor({\n                numComponents: 2,\n                componentType: 5126,\n                count: vertices.texcoord.length,\n                bufferView: bufferViewFromTypedArray(vertices.texcoord as never)\n            }),\n        }\n\n        function bufferViewFromTypedArray(typedArray: ArrayBufferView) {\n            return new BufferView({\n                buffer: typedArray.buffer,\n                byteLength: typedArray.byteLength,\n                byteOffset: typedArray.byteOffset,\n                byteStride: 0\n            })\n        }\n        super({\n            indices: new Accessor({\n                numComponents: 3,\n                componentType: 5123,\n                count: vertices.indices.length,\n                bufferView: bufferViewFromTypedArray(vertices.indices as never)\n            }),\n            attributes,\n            ...primitiveOptions\n        })\n    }\n}\n","import {BufferView} from \"./BufferView\";\n\n/**\n * An accessor object refers to a bufferView and contains properties that define the type and layout of the data of this bufferView.\n * See: https://github.com/KhronosGroup/glTF-Tutorials/blob/master/gltfTutorial/gltfTutorial_005_BuffersBufferViewsAccessors.md#accessors\n */\nexport class Accessor {\n    bufferView: BufferView;\n    // TODO: Can we remove this field\n    byteOffset: number;\n    // https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html#accessor-data-types\n    componentType: number;\n    normalized: boolean;\n    count: number;\n    numComponents: number;\n    min: number;\n    max: number;\n\n    constructor(options: Partial<Accessor>) {\n        this.bufferView = options.bufferView || null;\n        this.byteOffset = options.byteOffset || 0;\n        this.componentType = options.componentType || 5120;\n        this.normalized = options.normalized || false;\n        this.count = options.count || 0;\n        this.numComponents = options.numComponents || 0;\n        this.min = options.min || null;\n        this.max = options.max || null;\n    }\n\n}\n","/**\n * A bufferView represents a \"slice\" of the data of one buffer. This slice is defined using an offset and a length, in bytes\n * See: https://github.com/KhronosGroup/glTF-Tutorials/blob/master/gltfTutorial/gltfTutorial_005_BuffersBufferViewsAccessors.md#bufferviews\n */\nexport class BufferView {\n    buffer: ArrayBuffer;\n    byteOffset: number;\n    byteLength: number;\n    byteStride: number;\n\n    // TODO: Can we get rid of this, since it's only used in WebGLRenderer?\n    target: number;\n\n    constructor(options: Partial<BufferView>) {\n        this.buffer = options.buffer || null;\n        this.byteOffset = options.byteOffset || 0;\n        this.byteLength = options.byteLength || 0;\n        this.byteStride = options.byteStride !== undefined ? options.byteStride : null;\n    }\n\n}\n","import { Material } from '../materials/Material';\nimport {Accessor} from \"./Accessor\";\n\nexport type PrimitiveOptions = Partial<Primitive>;\n\n// This naming convention originates from glTF.\n// See: https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html#meshes\nexport type PrimitiveAttributeName =\n    \"POSITION\" |\n    \"TEXCOORD_0\" | // aka. \"UVs\"\n    \"NORMAL\"\n\nexport class Primitive {\n    attributes: Record<PrimitiveAttributeName, Accessor | null>;\n    indices: Accessor;\n    mode: number;\n    material: Material;\n\n    constructor(options: PrimitiveOptions = {}) {\n        this.attributes = options.attributes ?? {\n            POSITION: null,\n            TEXCOORD_0: null,\n            NORMAL: null\n        };\n        this.indices = options.indices ?? null;\n        this.mode = options.mode !== undefined ? options.mode : 4;\n        this.material = options.material ?? new Material({});\n    }\n\n    setAttribute(name: PrimitiveAttributeName, attribute: Accessor) {\n        this.attributes[name] = attribute;\n    }\n\n}\n\nexport function isPrimitiveAttributeName(name: string): name is PrimitiveAttributeName {\n    const validNamesLookup: Record<PrimitiveAttributeName, true> = {\n        NORMAL: true,\n        POSITION: true,\n        TEXCOORD_0: true\n    };\n    return validNamesLookup[name as PrimitiveAttributeName] ?? false\n}\n","import { TextureSampler } from '../textures/TextureSampler';\nimport {Texture, TextureOptions} from '../textures/Texture';\nimport {Material, MaterialOptions} from '../materials/Material';\nimport {isPrimitiveAttributeName, Primitive, PrimitiveOptions} from '../core/Primitive';\nimport {Mesh, MeshOptions} from '../core/Mesh';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera';\nimport { OrthographicCamera } from '../cameras/OrthographicCamera';\nimport {Object3D} from '../core/Object3D';\nimport {Scene, SceneOptions} from '../Scene';\nimport { deep } from \"../Utils\";\nimport { Light } from \"../lights/Light\";\nimport {BufferView} from \"../core/BufferView\";\nimport {Accessor} from \"../core/Accessor\";\nimport {Camera} from \"../cameras/Camera\";\nimport {PointLight} from \"../lights/PointLight\";\nimport {mat3, quat, vec3} from 'gl-matrix';\n\n// This class loads all GLTF resources and instantiates\n// the corresponding classes. Keep in mind that it loads\n// the resources in series (care to optimize?).\n\nexport class GLTFLoader {\n    cache: any;\n    private gltfUrl: URL\n    private gltf: any;\n    defaultScene: number;\n\n    constructor() {\n        this.gltf = null;\n        this.gltfUrl = null;\n        this.cache = new Map();\n    }\n\n    private async fetchJson(url: string): Promise<unknown> {\n        let response = await fetch(url);\n        return await response.json();\n    }\n\n    private async fetchBuffer(url: string): Promise<ArrayBuffer> {\n        let response = await fetch(url);\n        return await response.arrayBuffer();\n    }\n\n    private fetchImage(url: string): Promise<HTMLImageElement> {\n        return new Promise((resolve, reject) => {\n            let image = new Image();\n            image.addEventListener('load', e => resolve(image));\n            image.addEventListener('error', reject);\n            image.src = url;\n        });\n    }\n\n    findByNameOrIndex(mapping: any, nameOrIndex: string | number) {\n        if (typeof nameOrIndex === 'number') {\n            return mapping[nameOrIndex];\n        } else {\n            return mapping.find((element: any) => element.name === nameOrIndex);\n        }\n    }\n\n    async load(url: string) {\n        this.gltfUrl = new URL(url, window.location.origin);\n        this.gltf = await this.fetchJson(url);\n        this.defaultScene = this.gltf.scene || 0;\n    }\n\n    async loadImage(nameOrIndex: string | number): Promise<HTMLImageElement> {\n        const gltfSpec = this.findByNameOrIndex(this.gltf.images, nameOrIndex);\n        if (this.cache.has(gltfSpec)) {\n            return this.cache.get(gltfSpec);\n        }\n\n        if (gltfSpec.uri) {\n            const url = new URL(gltfSpec.uri, this.gltfUrl);\n            const image = await this.fetchImage(url.toString());\n            this.cache.set(gltfSpec, image);\n            return image;\n        } else {\n            const bufferView = await this.loadBufferView(gltfSpec.bufferView);\n            const blob = new Blob([bufferView], { type: gltfSpec.mimeType });\n            const url = URL.createObjectURL(blob);\n            const image = await this.fetchImage(url);\n            URL.revokeObjectURL(url);\n            this.cache.set(gltfSpec, image);\n            return image;\n        }\n    }\n\n    async loadBuffer(nameOrIndex: string | number): Promise<ArrayBuffer> {\n        const gltfSpec = this.findByNameOrIndex(this.gltf.buffers, nameOrIndex);\n        if (this.cache.has(gltfSpec)) {\n            return this.cache.get(gltfSpec);\n        }\n\n        const url = new URL(gltfSpec.uri, this.gltfUrl);\n        const buffer = await this.fetchBuffer(url.toString());\n        this.cache.set(gltfSpec, buffer);\n        return buffer;\n    }\n\n    async loadBufferView(nameOrIndex: string | number): Promise<BufferView> {\n        const gltfSpec = this.findByNameOrIndex(this.gltf.bufferViews, nameOrIndex);\n        if (this.cache.has(gltfSpec)) {\n            return this.cache.get(gltfSpec);\n        }\n\n        const bufferView = new BufferView({\n            ...gltfSpec,\n            buffer: await this.loadBuffer(gltfSpec.buffer),\n        });\n        this.cache.set(gltfSpec, bufferView);\n        return bufferView;\n    }\n\n    async loadAccessor(nameOrIndex: string | number): Promise<Accessor> {\n        const gltfSpec = this.findByNameOrIndex(this.gltf.accessors, nameOrIndex);\n        if (this.cache.has(gltfSpec)) {\n            return this.cache.get(gltfSpec);\n        }\n\n        const accessorTypeToNumComponentsLookup = new Map([\n            [\"SCALAR\", 1],\n            [\"VEC2\", 2],\n            [\"VEC3\", 3],\n            [\"VEC4\", 4],\n            [\"MAT2\", 4],\n            [\"MAT3\", 9],\n            [\"MAT4\", 16],\n        ])\n\n        const accessor = new Accessor({\n            ...gltfSpec,\n            bufferView    : await this.loadBufferView(gltfSpec.bufferView),\n            numComponents : accessorTypeToNumComponentsLookup.get(gltfSpec.type),\n        });\n        this.cache.set(gltfSpec, accessor);\n        return accessor;\n    }\n\n    async loadSampler(nameOrIndex: string | number) {\n        const gltfSpec = this.findByNameOrIndex(this.gltf.samplers, nameOrIndex);\n        if (this.cache.has(gltfSpec)) {\n            return this.cache.get(gltfSpec);\n        }\n\n        const sampler = new TextureSampler({\n            min   : gltfSpec.minFilter,\n            mag   : gltfSpec.magFilter,\n            wrapS : gltfSpec.wrapS,\n            wrapT : gltfSpec.wrapT,\n        });\n        this.cache.set(gltfSpec, sampler);\n        return sampler;\n    }\n\n    async loadTexture(nameOrIndex: string | number): Promise<Texture> {\n        const gltfSpec = this.findByNameOrIndex(this.gltf.textures, nameOrIndex);\n        if (this.cache.has(gltfSpec)) {\n            return this.cache.get(gltfSpec);\n        }\n\n        let options: TextureOptions = {};\n        if (gltfSpec.source !== undefined) {\n            options.image = await this.loadImage(gltfSpec.source);\n        }\n        if (gltfSpec.sampler !== undefined) {\n            options.sampler = await this.loadSampler(gltfSpec.sampler);\n        }\n\n        const texture = new Texture(options);\n        this.cache.set(gltfSpec, texture);\n        return texture;\n    }\n\n    async loadMaterial(nameOrIndex: string | number): Promise<Material> {\n        const gltfSpec = this.findByNameOrIndex(this.gltf.materials, nameOrIndex);\n        if (this.cache.has(gltfSpec)) {\n            return this.cache.get(gltfSpec);\n        }\n\n        let options: MaterialOptions = {};\n        const pbr = gltfSpec.pbrMetallicRoughness;\n        if (pbr !== undefined) {\n            if (pbr.baseColorTexture !== undefined) {\n                options.baseColorTexture = await this.loadTexture(pbr.baseColorTexture.index);\n                options.baseColorTexCoord = pbr.baseColorTexture.texCoord;\n                options.baseColorTransform = this.getTextureTransform(pbr.baseColorTexture);\n            }\n            if (pbr.metallicRoughnessTexture !== undefined) {\n                options.metallicRoughnessTexture = await this.loadTexture(pbr.metallicRoughnessTexture.index);\n                options.metallicRoughnessTexCoord = pbr.metallicRoughnessTexture.texCoord;\n            }\n            options.baseColorFactor = pbr.baseColorFactor;\n            options.metallicFactor = pbr.metallicFactor;\n            options.roughnessFactor = pbr.roughnessFactor;\n        }\n\n        if (gltfSpec.normalTexture !== undefined) {\n            options.normalTexture = await this.loadTexture(gltfSpec.normalTexture.index);\n            options.normalTexCoord = gltfSpec.normalTexture.texCoord;\n            options.normalFactor = gltfSpec.normalTexture.scale;\n        }\n\n        if (gltfSpec.occlusionTexture !== undefined) {\n            options.occlusionTexture = await this.loadTexture(gltfSpec.occlusionTexture.index);\n            options.occlusionTexCoord = gltfSpec.occlusionTexture.texCoord;\n            options.occlusionFactor = gltfSpec.occlusionTexture.strength;\n        }\n\n        if (gltfSpec.emissiveTexture !== undefined) {\n            options.emissiveTexture = await this.loadTexture(gltfSpec.emissiveTexture.index);\n            options.emissiveTexCoord = gltfSpec.emissiveTexture.texCoord;\n            options.emissiveFactor = gltfSpec.emissiveFactor;\n        }\n\n        options.alphaMode = gltfSpec.alphaMode;\n        options.alphaCutoff = gltfSpec.alphaCutoff;\n        options.doubleSided = gltfSpec.doubleSided;\n\n        const material = new Material(options);\n        this.cache.set(gltfSpec, material);\n        return material;\n    }\n\n    private getTextureTransform(textureWrapper: any): mat3 {\n        const gltfTransform = textureWrapper.extensions?.KHR_texture_transform;\n        const resultTransform = mat3.create();\n\n        if (!gltfTransform) {\n            return resultTransform;\n        }\n\n        let scale = mat3.create();\n        if (gltfTransform.scale) {\n            mat3.fromScaling(scale, gltfTransform.scale);\n        }\n\n        let translation = mat3.create();\n        if (gltfTransform.offset) {\n            mat3.fromTranslation(translation, gltfTransform.offset);\n        }\n\n        let rotation = mat3.create();\n        if (gltfTransform.rotation) {\n            mat3.fromRotation(rotation, gltfTransform.rotation);\n        }\n\n        mat3.multiply(resultTransform, resultTransform, scale);\n        mat3.multiply(resultTransform, resultTransform, translation);\n        mat3.multiply(resultTransform, resultTransform, rotation);\n\n        return resultTransform;\n    }\n\n    async loadMesh(nameOrIndex: string | number): Promise<Mesh> {\n        const gltfSpec = this.findByNameOrIndex(this.gltf.meshes, nameOrIndex);\n        if (this.cache.has(gltfSpec)) {\n            return this.cache.get(gltfSpec);\n        }\n\n        let options: MeshOptions = { primitives: [] };\n        for (const primitiveSpec of gltfSpec.primitives) {\n            let primitiveOptions: PrimitiveOptions = {\n                attributes: {\n                    NORMAL: null,\n                    TEXCOORD_0: null,\n                    POSITION: null,\n                }\n            };\n            for (const name in primitiveSpec.attributes) {\n                if (!isPrimitiveAttributeName(name)) {\n                    console.error(`Unsupported primitive attribute: ${name}`);\n                    continue\n                }\n                primitiveOptions.attributes[name] = await this.loadAccessor(primitiveSpec.attributes[name]);\n            }\n            if (primitiveSpec.indices !== undefined) {\n                primitiveOptions.indices = await this.loadAccessor(primitiveSpec.indices);\n            }\n            if (primitiveSpec.material !== undefined) {\n                primitiveOptions.material = await this.loadMaterial(primitiveSpec.material);\n            }\n            primitiveOptions.mode = primitiveSpec.mode;\n            const primitive = new Primitive(primitiveOptions);\n            options.primitives.push(primitive);\n        }\n\n        const mesh = new Mesh(options);\n        this.cache.set(gltfSpec, mesh);\n        return mesh;\n    }\n\n    // https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_lights_punctual/README.md\n    async loadLight(nameOrIndex: string | number): Promise<Light> {\n        const gltfSpec = this.findByNameOrIndex(deep(this.gltf, 'extensions.KHR_lights_punctual.lights'), nameOrIndex);\n        if (this.cache.has(gltfSpec)) {\n            return this.cache.get(gltfSpec);\n        }\n        const scaledColor = vec3.create();\n        vec3.scale(scaledColor, gltfSpec.color, 255);\n\n        function buildLight() {\n            switch (gltfSpec.type) {\n                case \"point\":\n                    return new PointLight({\n                        name: gltfSpec.name,\n                        color: scaledColor,\n                        // Currently we expect \"unit-less\" lightning mode export format from Blender.\n                        // See: https://github.com/KhronosGroup/glTF-Blender-IO/pull/1760\n                        // Hack: Scale by an arbitrary factor to adjust for our internal lightning intensity scale.\n                        intensity: gltfSpec.intensity ? gltfSpec.intensity / 5 : 1\n                    });\n            }\n        }\n        const light = buildLight();\n        this.cache.set(gltfSpec, light);\n        return light;\n    }\n\n    async loadCamera(nameOrIndex: string | number): Promise<Camera> {\n        const gltfSpec = this.findByNameOrIndex(this.gltf.cameras, nameOrIndex);\n        if (this.cache.has(gltfSpec)) {\n            return this.cache.get(gltfSpec);\n        }\n\n        if (gltfSpec.type === 'perspective') {\n            const persp = gltfSpec.perspective;\n            const camera = new PerspectiveCamera({\n                aspect : persp.aspectRatio,\n                fov    : persp.yfov,\n                near   : persp.znear,\n                far    : persp.zfar,\n            });\n            this.cache.set(gltfSpec, camera);\n            return camera;\n        } else if (gltfSpec.type === 'orthographic') {\n            const ortho = gltfSpec.orthographic;\n            const camera = new OrthographicCamera({\n                left   : -ortho.xmag,\n                right  : ortho.xmag,\n                bottom : -ortho.ymag,\n                top    : ortho.ymag,\n                near   : ortho.znear,\n                far    : ortho.zfar,\n            });\n            this.cache.set(gltfSpec, camera);\n            return camera;\n        }\n    }\n\n    // https://github.com/KhronosGroup/glTF-Tutorials/blob/master/gltfTutorial/gltfTutorial_004_ScenesNodes.md\n    async loadNode(nameOrIndex: string | number) {\n        const gltfSpec = this.findByNameOrIndex(this.gltf.nodes, nameOrIndex);\n        if (!gltfSpec) {\n            throw new Error(`Cant find node with index ${nameOrIndex}`)\n        }\n        if (this.cache.has(gltfSpec)) {\n            return this.cache.get(gltfSpec);\n        }\n\n        let node = new Object3D();\n\n        const light = deep(gltfSpec, 'extensions.KHR_lights_punctual.light');\n        if (light !== undefined) {\n            node = await this.loadLight(light)\n        }\n\n        node.name = gltfSpec.name;\n\n        if (gltfSpec.matrix) {\n            node.matrix = gltfSpec.matrix;\n            node.updateTransform();\n        } else if (gltfSpec.translation || gltfSpec.rotation || gltfSpec.scale) {\n            node.translation = gltfSpec.translation ?? vec3.fromValues(0,0,0);\n            node.scale = gltfSpec.scale ?? vec3.fromValues(1, 1, 1);\n            node.rotation = gltfSpec.rotation ?? quat.fromValues(0, 0, 0, 1);\n            node.updateMatrix();\n        }\n\n        if (gltfSpec.children) {\n            for (const nodeIndex of gltfSpec.children) {\n                node.addChild(await this.loadNode(nodeIndex))\n            }\n        }\n        // TODO: Migrate camera importing\n        // if (gltfSpec.camera !== undefined) {\n        //     options.camera = await this.loadCamera(gltfSpec.camera);\n        // }\n        if (gltfSpec.mesh !== undefined) {\n            node.mesh = await this.loadMesh(gltfSpec.mesh);\n        }\n\n        this.cache.set(gltfSpec, node);\n        return node;\n    }\n\n    async loadScene(nameOrIndex: string | number): Promise<Scene> {\n        const gltfSpec = this.findByNameOrIndex(this.gltf.scenes, nameOrIndex);\n        if (this.cache.has(gltfSpec)) {\n            return this.cache.get(gltfSpec);\n        }\n\n        let options: SceneOptions = { nodes: [] };\n        if (gltfSpec.nodes) {\n            for (const nodeIndex of gltfSpec.nodes) {\n                const node = await this.loadNode(nodeIndex);\n                options.nodes.push(node);\n            }\n        }\n\n        const scene = new Scene(options);\n        this.cache.set(gltfSpec, scene);\n        return scene;\n    }\n\n}\n","export type TextureSamplerOptions = Partial<TextureSampler>;\n\n/**\n * See: https://github.com/KhronosGroup/glTF-Tutorials/blob/master/gltfTutorial/gltfTutorial_012_TexturesImagesSamplers.md\n */\nexport class TextureSampler {\n    mag: number;\n    min: number;\n    wrapT: number;\n    wrapS: number;\n\n    constructor(options: TextureSamplerOptions = {}) {\n        this.mag = options.mag || 9729;\n        this.min = options.min || 9729;\n        this.wrapS = options.wrapS || 10497;\n        this.wrapT = options.wrapT || 10497;\n    }\n\n}\n","import { TextureSampler } from './TextureSampler';\n\nexport type TextureOptions = Partial<Texture>;\n\nexport class Texture {\n    image: HTMLImageElement | null;\n    sampler: TextureSampler;\n    hasMipmaps: boolean;\n\n    constructor(options: TextureOptions) {\n        this.image = options.image ?? null;\n        this.sampler = options.sampler ?? new TextureSampler();\n        this.hasMipmaps = options.hasMipmaps ?? false;\n    }\n\n}\n","import {GameObject} from \"../core/GameObject\";\nimport {Object3D} from \"../../engine/core/Object3D\";\nimport * as CANNON from \"cannon-es\";\nimport {BufferView} from \"../../engine/core/BufferView\";\nimport {meshToCannonShape} from \"../utils\";\n\ntype WallOptions = {\n    physicsMaterial: CANNON.Material;\n}\n\nexport class Wall extends GameObject {\n    public body: CANNON.Body;\n    private readonly physicsMaterial: CANNON.Material;\n\n    constructor(object: Object3D, options: WallOptions) {\n        super();\n        Object.assign(this, object);\n        this.physicsMaterial = options.physicsMaterial;\n\n        const shape = meshToCannonShape(this.mesh);\n\n        shape.setScale(new CANNON.Vec3(...this.scale));\n\n        this.body = new CANNON.Body({\n            type: CANNON.BODY_TYPES.STATIC,\n            material: this.physicsMaterial,\n            position: new CANNON.Vec3(...this.translation),\n            quaternion: new CANNON.Quaternion(...this.rotation),\n            shape\n        });\n    }\n\n    async load(): Promise<void> {}\n\n    update(): void {\n        this.translation = this.body.position.toArray();\n        this.updateMatrix();\n    }\n\n}\n","export class UiController {\n    // Buttons\n    startButton: HTMLElement;\n    restartButton: HTMLElement;\n    startOverButton: HTMLElement;\n    // UI containers\n    startScreen: HTMLElement;\n    loseScreen: HTMLElement;\n    winScreen: HTMLElement;\n    gameStatusPanel: HTMLElement;\n    // Other\n    timeLeftValue: HTMLElement;\n    keysFoundValue: HTMLElement;\n    canvas: HTMLCanvasElement;\n    private static instance: UiController;\n\n    constructor() {\n        this.startButton = document.getElementById(\"start-button\");\n        this.restartButton = document.getElementById(\"restart-button\");\n        this.startOverButton = document.getElementById(\"start-over-button\");\n\n        this.startScreen = document.getElementById(\"start-screen\");\n        this.loseScreen = document.getElementById(\"lose-screen\");\n        this.winScreen = document.getElementById(\"win-screen\");\n        this.gameStatusPanel = document.getElementById(\"game-status-panel\");\n\n        this.timeLeftValue = document.getElementById(\"time-left-value\");\n        this.keysFoundValue = document.getElementById(\"keys-found-value\");\n\n        this.canvas = document.querySelector('canvas');\n    }\n\n    static create(): UiController {\n        if (!UiController.instance) {\n            UiController.instance = new UiController();\n        }\n        return UiController.instance;\n    }\n\n    showStartScreen() {\n        this.setIsVisible(this.startScreen, true);\n        this.setIsVisible(this.loseScreen, false);\n        this.setIsVisible(this.winScreen, false);\n        this.setIsVisible(this.gameStatusPanel, false);\n        this.setIsVisible(this.canvas, false);\n    }\n\n    showLoseScreen() {\n        this.setIsVisible(this.startScreen, false);\n        this.setIsVisible(this.loseScreen, true);\n        this.setIsVisible(this.winScreen, false);\n        this.setIsVisible(this.gameStatusPanel, false);\n        this.setIsVisible(this.canvas, false);\n    }\n\n    showWinScreen() {\n        this.setIsVisible(this.startScreen, false);\n        this.setIsVisible(this.loseScreen, false);\n        this.setIsVisible(this.winScreen, true);\n        this.setIsVisible(this.gameStatusPanel, false);\n        this.setIsVisible(this.canvas, false);\n    }\n\n    showGameScreen() {\n        this.setIsVisible(this.startScreen, false);\n        this.setIsVisible(this.loseScreen, false);\n        this.setIsVisible(this.winScreen, false);\n        this.setIsVisible(this.gameStatusPanel, true);\n        this.setIsVisible(this.canvas, true);\n    }\n\n    setTimeLeft(seconds: number) {\n        console.log(seconds)\n        this.timeLeftValue.innerText = `${seconds}s`;\n    }\n\n    setKeysFound(options: {\n        foundKeys: number;\n        totalKeys: number\n    }) {\n        this.keysFoundValue.innerText = `${options.foundKeys} / ${options.totalKeys}`\n    }\n\n    setIsStartScreenLoading(isLoading: boolean) {\n        if (isLoading) {\n            this.startButton.innerText = \"Loading...\";\n            this.startButton.setAttribute(\"disabled\", \"\");\n        } else {\n            this.startButton.innerText = \"Start\";\n            this.startButton.removeAttribute(\"disabled\");\n        }\n    }\n\n    private setIsVisible(element: HTMLElement, isVisible: boolean) {\n        element.style.display = isVisible ? \"flex\" : \"none\";\n    }\n}\n","import \"./style.css\"\nimport {WebGlApplication} from \"../engine/WebGlApplication\";\nimport {Pane} from 'tweakpane';\n\n// @ts-ignore\nimport { WebGLRenderer } from \"../engine/renderers/webgl/WebGLRenderer\";\nimport {quat} from \"gl-matrix\";\nimport {TestScene} from \"./scenes/TestScene\";\nimport {GameScene} from \"./core/GameScene\";\nimport {LabyrinthScene} from \"./scenes/LabyrinthScene\";\nimport {Player} from \"./objects/Player\";\nimport {UiController} from \"./UiController\";\nimport { Howl } from \"howler\";\n\nconst useTestScene = false;\nconst showDebugControls = false;\n\nclass App extends WebGlApplication {\n\n  private renderer: WebGLRenderer;\n  public scene: GameScene;\n  public player: Player;\n\n  private sound = new Howl({\n    src: ['./sounds/background2.mp3'],\n    html5: true,\n    volume: 0.15,\n    loop: true,\n  });\n\n  cameraConfig = {\n    fov: 1.8,\n  }\n  rotatingObjectConfig = {\n    name: \"Monkey\",\n    rotationX: 0,\n    rotationY: 0,\n    rotationZ: 0\n  }\n\n  async start() {\n    if (useTestScene) {\n      this.scene = new TestScene();\n    } else {\n      this.scene = new LabyrinthScene();\n    }\n\n    // Loads the scene nodes\n    await this.scene.start();\n\n    // Log scene in console for easier debugging.\n    console.log(this.scene);\n\n    this.sound.play();\n\n    const player = this.scene.findNodes(node => node instanceof Player)[0];\n    if (player) {\n      this.player = player as Player;\n    } else {\n      throw new Error(\"Player not found in the scene\");\n    }\n\n    this.renderer = new WebGLRenderer(this.gl, {clearColor: [1,1,1,1]});\n    this.renderer.prepareScene(this.scene);\n\n    super.start();\n  }\n\n  update (dt:number, time:number) {\n    // Rotate object specified in UI controls\n    this.rotateTargetObject();\n\n    // Update all objects in the scene\n    this.scene.update(dt, time);\n\n    // Update camera config in case changed\n    this.player.camera.fov = this.cameraConfig.fov;\n    this.player.camera.updateProjection();\n  }\n\n  private rotateTargetObject() {\n    const matchingObjects = this.scene.findNodesByNamePattern(this.rotatingObjectConfig.name);\n\n    for (const object of matchingObjects) {\n      quat.fromEuler(\n          object.rotation,\n          this.rotatingObjectConfig.rotationX,\n          this.rotatingObjectConfig.rotationY,\n          this.rotatingObjectConfig.rotationZ\n      );\n      object.updateMatrix();\n    }\n  }\n\n  render() {\n    if (this.renderer) {\n      this.renderer.render(this.scene, this.player.camera);\n    }\n  }\n\n  resize(aspectRatio: number) {\n    this.scene.resize(aspectRatio);\n  }\n\n  enableCamera() {\n    this.canvas.requestPointerLock();\n    document.addEventListener('pointerlockchange', () => {\n      if (document.pointerLockElement === this.canvas) {\n        this.player.controls.enable();\n      } else {\n        this.player.controls.disable();\n      }\n    })\n  }\n\n}\n\nasync function setupDebugControls (app: App) {\n  const pane = new Pane();\n\n  const cameraFolder = pane.addFolder({title: \"Camera\"})\n  const enableCameraButton = cameraFolder.addButton({\n    title: \"Enable\",\n  });\n  enableCameraButton.on(\"click\", () => app.enableCamera());\n  cameraFolder.addBinding(app.cameraConfig, \"fov\", {\n    min: 0,\n    max: 3\n  });\n\n  const objectFolder = pane.addFolder({ title: \"Transform\"});\n  objectFolder.addBinding(app.rotatingObjectConfig, \"name\");\n  objectFolder.addBinding(app.rotatingObjectConfig, \"rotationX\", {\n    min: -90,\n    max: 90\n  });\n  objectFolder.addBinding(app.rotatingObjectConfig, \"rotationY\", {\n    min: -90,\n    max: 90\n  });\n  objectFolder.addBinding(app.rotatingObjectConfig, \"rotationZ\", {\n    min: -90,\n    max: 90\n  });\n\n  const sceneFolder = pane.addFolder({ title: \"Scene\"});\n  sceneFolder.addBinding(app.scene.world.gravity, \"x\", {\n    min: -10,\n    max: 10\n  });\n  sceneFolder.addBinding(app.scene.world.gravity, \"y\", {\n    min: -10,\n    max: 10\n  });\n  sceneFolder.addBinding(app.scene.world.gravity, \"z\", {\n    min: -10,\n    max: 10\n  });\n}\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n  const uiController = UiController.create();\n  const app = new App(uiController.canvas);\n\n  uiController.showStartScreen();\n  uiController.canvas.addEventListener(\"click\", () => app.enableCamera())\n\n  async function startGame() {\n    app.stop();\n\n    // For now just re-load the whole scene,\n    // as our game initialization logic is tightly coupled to the loading logic.\n    // TODO: Separate loading from initialization\n    uiController.setIsStartScreenLoading(true);\n    await app.start();\n    uiController.setIsStartScreenLoading(false);\n\n    uiController.showGameScreen();\n\n    app.enableCamera();\n\n    if (showDebugControls) {\n      setupDebugControls(app);\n    }\n  }\n\n  uiController.startButton.addEventListener(\"click\", () => startGame());\n  uiController.restartButton.addEventListener(\"click\", () => startGame());\n  uiController.startOverButton.addEventListener(\"click\", () => startGame());\n});\n","export abstract class WebGlApplication {\n\n  public readonly canvas: HTMLCanvasElement;\n  public gl: WebGL2RenderingContext;\n  private t0: number;\n  private animationFrame: number;\n\n  constructor (canvas: HTMLCanvasElement, glOptions?: WebGLContextAttributes) {\n    this.internalUpdate = this.internalUpdate.bind(this);\n\n    this.canvas = canvas;\n    this._initGL(glOptions);\n  }\n\n  _initGL (glOptions?: WebGLContextAttributes) {\n    this.gl = null;\n    try {\n      this.gl = this.canvas.getContext('webgl2', glOptions);\n    } catch (error) {\n    }\n\n    if (!this.gl) {\n      throw new Error('Cannot create WebGL 2.0 context');\n    }\n  }\n\n  private internalUpdate (time: number) {\n    this.internalResize();\n    const t = time * 0.001;\n    const dt = (this.t0 ? t - this.t0 : t);\n    this.update(dt, t);\n    this.render(dt, t);\n    this.t0 = t;\n    this.animationFrame = requestAnimationFrame(this.internalUpdate);\n  }\n\n  private internalResize () {\n    const { canvas, gl } = this;\n\n    if (canvas.width !== canvas.clientWidth ||\n      canvas.height !== canvas.clientHeight) {\n      canvas.width = canvas.clientWidth;\n      canvas.height = canvas.clientHeight;\n\n      gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n      this.updateAspectRatio();\n    }\n  }\n\n  private updateAspectRatio() {\n    const w = this.canvas.clientWidth;\n    const h = this.canvas.clientHeight;\n    const aspectRatio = w / h;\n    this.resize(aspectRatio);\n  }\n\n  /**\n   * Asset loading, initialization code (including event handler binding),...\n   *\n   * Must call `super.start()` in the extended class (at the end of the method).\n   */\n  public start () {\n    this.updateAspectRatio();\n    this.animationFrame = requestAnimationFrame(this.internalUpdate);\n  }\n\n  public stop () {\n    cancelAnimationFrame(this.animationFrame);\n  }\n\n  /**\n   * Update code (input, animations, AI ...)\n   * @param dt Delta time from the last update frame.\n   * @param time Elapsed time since the call of `this.start`.\n   */\n  public abstract update (dt: number, time: number): void;\n\n  /**\n   * Render logic (WebGL API calls).\n   * @param dt Delta time from the last update frame.\n   * @param time Elapsed time since the call of `this.start`.\n   */\n  public abstract render (dt: number, time: number): void;\n\n  /**\n   * Resize code (e.g. update projection matrix)\n   */\n  public abstract resize (aspectRatio: number): void;\n\n}\n","import {mat4, vec3, vec4} from 'gl-matrix';\n\nimport {WebGL, WebGLProgramBundle} from \"./WebGL\";\nimport { Light } from \"../../lights/Light\";\n\nimport {CoreShaderOptions, createFragmentShader, createVertexShader} from \"./core-shaders\";\nimport ShaderMaterial, {ShaderUniform, UniformType} from \"../../materials/ShaderMaterial\";\nimport {Scene} from \"../../Scene\";\nimport {Object3D} from \"../../core/Object3D\";\nimport {Mesh} from \"../../core/Mesh\";\nimport {PrimitiveAttributeName, Primitive} from \"../../core/Primitive\";\nimport {TextureSampler} from \"../../textures/TextureSampler\";\nimport {Texture} from \"../../textures/Texture\";\nimport {Material} from \"../../materials/Material\";\nimport {BufferView} from \"../../core/BufferView\";\nimport {Camera} from \"../../cameras/Camera\";\nimport {DirectionalLight} from \"../../lights/DirectionalLight\";\nimport {AmbientLight} from \"../../lights/AmbientLight\";\nimport {PointLight} from \"../../lights/PointLight\";\n\n// This class prepares all assets for use with WebGL\n// and takes care of rendering.\n\ntype WebGLRendererOptions = {\n  clearColor: vec4;\n}\n\nexport class WebGLRenderer {\n  private readonly gl: WebGL2RenderingContext;\n  private readonly clearColor: vec4;\n  private readonly defaultTexture: WebGLTexture;\n  private programs: Map<any, WebGLProgramBundle>;\n  private glObjects: Map<any, any>;\n\n  constructor (gl: WebGL2RenderingContext, options?: WebGLRendererOptions) {\n    this.gl = gl;\n    this.clearColor = options.clearColor ?? [1,1,1,1];\n    this.glObjects = new Map();\n    this.programs = new Map();\n\n    this.defaultTexture = WebGL.createTexture(gl, {\n      data: new Uint8Array([255, 255, 255, 255]),\n      width: 1,\n      height: 1,\n    });\n\n    const [r, g, b, a] = this.clearColor;\n    gl.clearColor(r, g, b, a);\n    gl.enable(gl.DEPTH_TEST);\n    gl.enable(gl.CULL_FACE);\n  }\n\n  get defaultProgram() {\n    return this.programs.get(\"default\")\n  }\n\n  preparePrograms(options: CoreShaderOptions) {\n    const program = WebGL.buildProgram(this.gl, {\n      vertex: createVertexShader(options),\n      fragment: createFragmentShader(options)\n    });\n    this.programs.set(\"default\", program);\n  }\n\n  prepareBufferView (bufferView: BufferView) {\n    if (this.glObjects.has(bufferView)) {\n      return this.glObjects.get(bufferView);\n    }\n\n    const buffer = new DataView(\n      bufferView.buffer,\n      bufferView.byteOffset,\n      bufferView.byteLength);\n\n    const glBuffer = WebGL.createBuffer(this.gl, {\n      target: bufferView.target,\n      data: buffer\n    });\n    this.glObjects.set(bufferView, glBuffer);\n    return glBuffer;\n  }\n\n  prepareSampler (sampler: TextureSampler) {\n    if (this.glObjects.has(sampler)) {\n      return this.glObjects.get(sampler);\n    }\n\n    const glSampler = WebGL.createSampler(this.gl, sampler);\n    this.glObjects.set(sampler, glSampler);\n    return glSampler;\n  }\n\n  prepareImage (image: HTMLImageElement) {\n    if (this.glObjects.has(image)) {\n      return this.glObjects.get(image);\n    }\n\n    const glTexture = WebGL.createTexture(this.gl, { image });\n    this.glObjects.set(image, glTexture);\n    return glTexture;\n  }\n\n  prepareTexture (texture: Texture) {\n    const gl = this.gl;\n\n    this.prepareSampler(texture.sampler);\n    const glTexture = this.prepareImage(texture.image);\n\n    const mipmapModes = [\n      gl.NEAREST_MIPMAP_NEAREST,\n      gl.NEAREST_MIPMAP_LINEAR,\n      gl.LINEAR_MIPMAP_NEAREST,\n      gl.LINEAR_MIPMAP_LINEAR,\n    ];\n\n    if (!texture.hasMipmaps && mipmapModes.includes(texture.sampler.min)) {\n      gl.bindTexture(gl.TEXTURE_2D, glTexture);\n      gl.generateMipmap(gl.TEXTURE_2D);\n      texture.hasMipmaps = true;\n    }\n  }\n\n  prepareMaterial (material: Material) {\n    if (material instanceof ShaderMaterial) {\n      this.prepareShaderMaterial(material);\n    }\n    if (material.baseColorTexture) {\n      this.prepareTexture(material.baseColorTexture);\n    }\n    if (material.metallicRoughnessTexture) {\n      this.prepareTexture(material.metallicRoughnessTexture);\n    }\n    if (material.normalTexture) {\n      this.prepareTexture(material.normalTexture);\n    }\n    if (material.occlusionTexture) {\n      this.prepareTexture(material.occlusionTexture);\n    }\n    if (material.emissiveTexture) {\n      this.prepareTexture(material.emissiveTexture);\n    }\n  }\n\n  prepareShaderMaterial(material: ShaderMaterial) {\n    try {\n      const program = WebGL.buildProgram(this.gl, {\n        // TODO: add support for custom vertex shaders?\n        vertex: createVertexShader({\n          // Doesn't matter what we use here, as lights are not applied in custom shaders yet.\n          numberOfLights: 1\n        }),\n        fragment: material.fragmentShader,\n      });\n      this.programs.set(material, program);\n    } catch (e) {\n      throw new Error(\"ShaderMaterial error: \" + e)\n    }\n  }\n\n  preparePrimitive (primitive: Primitive) {\n    if (this.glObjects.has(primitive)) {\n      return this.glObjects.get(primitive);\n    }\n\n    this.prepareMaterial(primitive.material);\n\n    const gl = this.gl;\n    const vao = gl.createVertexArray();\n    gl.bindVertexArray(vao);\n    if (primitive.indices) {\n      const bufferView = primitive.indices.bufferView;\n      bufferView.target = gl.ELEMENT_ARRAY_BUFFER;\n      const buffer = this.prepareBufferView(bufferView);\n      gl.bindBuffer(bufferView.target, buffer);\n    }\n\n    // This is an application-scoped convention (originating from glTF), matching the shaders.\n    const attributeNameToIndexLookup: Record<PrimitiveAttributeName, number> = {\n      POSITION: 0,\n      TEXCOORD_0: 1,\n      NORMAL: 2,\n    }\n\n    for (const name in primitive.attributes) {\n      const typedName = name as PrimitiveAttributeName;\n      const accessor = primitive.attributes[typedName];\n      const bufferView = accessor.bufferView;\n      const attributeIndex = attributeNameToIndexLookup[typedName]\n\n      if (attributeIndex !== undefined) {\n        bufferView.target = gl.ARRAY_BUFFER;\n        const buffer = this.prepareBufferView(bufferView);\n        gl.bindBuffer(bufferView.target, buffer);\n        gl.enableVertexAttribArray(attributeIndex);\n        gl.vertexAttribPointer(\n          attributeIndex,\n          accessor.numComponents,\n          accessor.componentType,\n          accessor.normalized,\n          bufferView.byteStride,\n          accessor.byteOffset);\n      }\n    }\n\n    this.glObjects.set(primitive, vao);\n    return vao;\n  }\n\n  prepareMesh (mesh: Mesh) {\n    for (const primitive of mesh.primitives) {\n      this.preparePrimitive(primitive);\n    }\n  }\n\n  prepare3dObject (object: Object3D) {\n    if (object.mesh) {\n      this.prepareMesh(object.mesh);\n    }\n    for (const child of object.children) {\n      this.prepare3dObject(child);\n    }\n  }\n\n  prepareScene (scene: Scene) {\n    let lights = scene.findNodes(node => node instanceof Light);\n    const numberOfLights = lights.length;\n\n    if (numberOfLights === 0) {\n      throw new Error(\"Scene must have at least 1 light\")\n    }\n\n    // rebuild programs if complete scene info is known on startup\n    this.preparePrograms({\n      numberOfLights\n    })\n    for (const node of scene.nodes) {\n      this.prepare3dObject(node);\n    }\n  }\n\n  render (scene: Scene, camera: Camera) {\n    const gl = this.gl;\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    let viewModelMatrix = mat4.create();\n    let modelMatrix = mat4.create();\n    let modelViewMatrixStack: mat4[] = [];\n    let modelMatrixStack: mat4[] = [];\n\n    const viewMatrix = camera.getGlobalTransform();\n    mat4.invert(viewMatrix, viewMatrix);\n    mat4.copy(viewModelMatrix, viewMatrix);\n\n    let lightCount = 0;\n\n    scene.traverse({\n      onEnter: object => {\n        modelViewMatrixStack.push(mat4.clone(viewModelMatrix));\n        modelMatrixStack.push(mat4.clone(modelMatrix));\n\n        mat4.mul(viewModelMatrix, viewModelMatrix, object.matrix);\n        mat4.mul(modelMatrix, modelMatrix, object.matrix);\n\n        if (object instanceof Light) {\n          this.renderLight(object, lightCount)\n          lightCount++;\n        }\n\n        this.renderObject3D(object, {\n          viewModel: viewModelMatrix,\n          model: modelMatrix,\n          projection: camera.projection\n        });\n      },\n      onLeave: () => {\n        viewModelMatrix = modelViewMatrixStack.pop();\n        modelMatrix = modelMatrixStack.pop();\n      }\n    });\n  }\n\n  renderLight(light: Light, lightIndex: number) {\n    const { gl, defaultProgram: program } = this;\n\n    function arrayParamName(name: string) {\n      return `${name}[${lightIndex}]`\n    }\n\n    function getLightType() {\n      // Must be kept in sync with constants in core fragment shader.\n      switch (true) {\n        case light instanceof AmbientLight:\n          return 0;\n        case light instanceof DirectionalLight:\n          return 1;\n        case light instanceof PointLight:\n          return 2;\n        default:\n          throw new Error(`Unknown light type: ${JSON.stringify(light)}`)\n      }\n    }\n\n    let color = vec3.clone(light.color);\n    vec3.scale(color, color, 1.0 / 255.0);\n    gl.uniform3fv(program.uniforms[arrayParamName(\"uLightColor\")], color);\n\n    let position: vec3 = [0, 0, 0];\n    mat4.getTranslation(position, light.matrix);\n\n    gl.uniform3fv(program.uniforms[arrayParamName(\"uLightPosition\")], position);\n    gl.uniform1i(program.uniforms[arrayParamName(\"uLightType\")], getLightType());\n    gl.uniform1f(program.uniforms[arrayParamName(\"uLightIntensity\")], light.intensity);\n\n    if (light instanceof DirectionalLight) {\n      gl.uniform3fv(program.uniforms[arrayParamName(\"uLightDirection\")], light.direction);\n    }\n  }\n\n  renderObject3D (object3d: Object3D, matrices: {\n    viewModel: mat4,\n    projection: mat4,\n    model: mat4\n  }) {\n    const program = this.defaultProgram;\n    this.gl.uniformMatrix4fv(program.uniforms.uModel, false, matrices.model);\n    this.gl.uniformMatrix4fv(program.uniforms.uViewModel, false, matrices.viewModel);\n\n    if (object3d.mesh) {\n      for (const primitive of object3d.mesh.primitives) {\n        this.renderPrimitive(primitive, matrices);\n      }\n    }\n  }\n\n  renderPrimitive (primitive: Primitive, matrices: {\n    viewModel: mat4,\n    projection: mat4,\n    model: mat4\n  }) {\n    const gl = this.gl;\n\n    const vao = this.glObjects.get(primitive);\n    const material = primitive.material;\n    let program = this.defaultProgram;\n\n    if (material instanceof ShaderMaterial) {\n      program = this.programs.get(material);\n    }\n\n    gl.useProgram(program.program);\n\n    // set standard geometry uniforms\n    gl.uniformMatrix4fv(program.uniforms.uProjection, false, matrices.projection);\n    gl.uniformMatrix4fv(program.uniforms.uViewModel, false, matrices.viewModel);\n    gl.uniform1i(program.uniforms.uTexture, 0);\n\n    // set standard material uniforms\n    gl.uniform4fv(program.uniforms.uBaseColorFactor, material.baseColorFactor);\n    gl.uniformMatrix3fv(program.uniforms.uBaseColorTransform, false, material.baseColorTransform);\n\n    if (material instanceof ShaderMaterial) {\n      this.setShaderUniformValues(program, material)\n    }\n\n    const texture = material.baseColorTexture;\n    const glTexture = this.glObjects.get(texture?.image);\n    const glSampler = this.glObjects.get(texture?.sampler);\n\n    gl.bindVertexArray(vao);\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, glTexture || this.defaultTexture);\n    gl.bindSampler(0, glSampler);\n\n    if (primitive.indices) {\n      const mode = primitive.mode;\n      const count = primitive.indices.count;\n      const type = primitive.indices.componentType;\n      gl.drawElements(mode, count, type, 0);\n    } else {\n      const mode = primitive.mode;\n      const count = primitive.attributes.POSITION.count;\n      gl.drawArrays(mode, 0, count);\n    }\n  }\n\n  private setShaderUniformValues(program: WebGLProgramBundle, material: ShaderMaterial) {\n    for (const name in material.uniforms) {\n      const uniform = material.uniforms[name];\n      const func: `uniform${UniformType}` = `uniform${uniform.type}`;\n      for (const webGLName of this.getGlUniformParamNames(name, uniform)) {\n        const location = program.uniforms[webGLName];\n        if (this.gl[func]) {\n          const shouldSpreadValue = typeof uniform.value === \"object\" && !uniform.type.endsWith(\"v\");\n          if (shouldSpreadValue) {\n            // @ts-ignore\n            this.gl[func](location, ...uniform.value);\n          } else {\n            // @ts-ignore\n            this.gl[func](location, uniform.value);\n          }\n        } else {\n          throw new Error(`GLSL uniform type ${uniform.type} not supported!`)\n        }\n      }\n    }\n  }\n\n  private getGlUniformParamNames(uniformName: string, uniform: ShaderUniform) {\n    const isVectorUniform = uniform.type.endsWith(\"v\");\n\n    if (!isVectorUniform) {\n      return [uniformName];\n    }\n\n    if (typeof uniform.value !== \"object\") {\n      throw new Error(`Expected array uniform value: ${uniform}`)\n    }\n\n    const indexedNames = [];\n    for (let i = 0; i < uniform.value.length; i++) {\n      indexedNames.push(`${uniformName}[${i}]`);\n    }\n    return indexedNames;\n  }\n\n}\n","type WebGLAttributes = Record<string, number>;\ntype WebGLUniforms = Record<string, WebGLUniformLocation>;\n\nexport type WebGLProgramBundle = {\n  program: WebGLProgram,\n  attributes: WebGLAttributes,\n  uniforms: WebGLUniforms\n}\n\ntype WebGlProgramSource = {\n  vertex: string,\n  fragment: string,\n}\n\ntype WebGLTextureOptions = {\n  target?: number,\n  format?: number,\n  iformat?: number,\n  type?: number,\n  texture?: WebGLTexture\n  unit?: number;\n  image?: TexImageSource,\n  wrapS?: number,\n  wrapT?: number,\n  min?: number,\n  mag?: number,\n  mip?: number,\n  width?: number,\n  height?: number,\n  data?: ArrayBufferView\n}\n\ntype WebGLBufferOptions = {\n  target?: number,\n  hint?: number,\n  buffer?: WebGLBuffer,\n  data?: DataView\n}\n\ntype WebGlSamplerOptions = {\n  sampler?: WebGLSampler,\n  wrapS?: number,\n  wrapT?: number,\n  min?: number,\n  mag?: number,\n}\n\nexport class WebGL {\n\n  static buildProgram(gl: WebGL2RenderingContext, program: WebGlProgramSource) {\n    try {\n      return WebGL.createProgram(gl, [\n        WebGL.createShader(gl, program.vertex, gl.VERTEX_SHADER),\n        WebGL.createShader(gl, program.fragment, gl.FRAGMENT_SHADER)\n      ]);\n    } catch (err) {\n      throw new Error('Error compiling ' + '\\n' + err);\n    }\n  }\n\n  static createProgram(gl: WebGL2RenderingContext, shaders: WebGLShader[]): WebGLProgramBundle {\n    const program = gl.createProgram();\n    for (const shader of shaders) {\n      gl.attachShader(program, shader);\n    }\n    gl.linkProgram(program);\n    const status = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!status) {\n      const log = gl.getProgramInfoLog(program);\n      throw new Error('Cannot link program\\nInfo log:\\n' + log);\n    }\n\n    const attributes: Record<string, number> = {};\n    const activeAttributes = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n    for (let i = 0; i < activeAttributes; i++) {\n      const info = gl.getActiveAttrib(program, i);\n      attributes[info.name] = gl.getAttribLocation(program, info.name);\n    }\n\n    const uniforms: Record<string, WebGLUniformLocation> = {};\n    const activeUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n    for (let i = 0; i < activeUniforms; i++) {\n      const info = gl.getActiveUniform(program, i);\n      uniforms[info.name] = gl.getUniformLocation(program, info.name);\n\n      // WebGL only returns the first index name for vector uniforms (e.g. `uniformName[0]`).\n      // If this is a vector uniform (size > 1), extract subsequent uniform index locations manually.\n      for (let j = 1; j < info.size; j++) {\n        const name = info.name.replace(\"[0]\", `[${j}]`);\n        uniforms[name] = gl.getUniformLocation(program, name);\n      }\n    }\n\n    return { program, attributes, uniforms };\n  }\n\n  static createShader(gl: WebGL2RenderingContext, source: string, type: number) {\n    const shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    const status = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    if (!status) {\n      const log = gl.getShaderInfoLog(shader);\n      throw new Error(`Cannot compile shader:\\n${source}Info log:\\n${log}`);\n    }\n    return shader;\n  }\n\n  static createTexture(gl: WebGL2RenderingContext, options: WebGLTextureOptions) {\n    const target  = options.target  || gl.TEXTURE_2D;\n    const iformat = options.iformat || gl.RGBA;\n    const format  = options.format  || gl.RGBA;\n    const type    = options.type    || gl.UNSIGNED_BYTE;\n    const texture = options.texture || gl.createTexture();\n\n    if (typeof options.unit !== 'undefined') {\n      gl.activeTexture(gl.TEXTURE0 + options.unit);\n    }\n\n    gl.bindTexture(target, texture);\n\n    if (options.image) {\n      gl.texImage2D(\n        target, 0, iformat,\n        format, type, options.image);\n    } else {\n      // if options.data == null, just allocate\n      gl.texImage2D(\n        target, 0, iformat,\n        options.width, options.height, 0,\n        format, type, options.data);\n    }\n\n    if (options.wrapS) { gl.texParameteri(target, gl.TEXTURE_WRAP_S, options.wrapS); }\n    if (options.wrapT) { gl.texParameteri(target, gl.TEXTURE_WRAP_T, options.wrapT); }\n    if (options.min) { gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, options.min); }\n    if (options.mag) { gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, options.mag); }\n    if (options.mip) { gl.generateMipmap(target); }\n\n    return texture;\n  }\n\n  static createBuffer(gl: WebGL2RenderingContext, options: WebGLBufferOptions) {\n    const target = options.target || gl.ARRAY_BUFFER;\n    const hint   = options.hint   || gl.STATIC_DRAW;\n    const buffer = options.buffer || gl.createBuffer();\n\n    gl.bindBuffer(target, buffer);\n    gl.bufferData(target, options.data, hint);\n\n    return buffer;\n  }\n\n  static createSampler(gl: WebGL2RenderingContext, options: WebGlSamplerOptions) {\n    const sampler = options.sampler || gl.createSampler();\n\n    if (options.wrapS) { gl.samplerParameteri(sampler, gl.TEXTURE_WRAP_S, options.wrapS); }\n    if (options.wrapT) { gl.samplerParameteri(sampler, gl.TEXTURE_WRAP_T, options.wrapT); }\n    if (options.min) { gl.samplerParameteri(sampler, gl.TEXTURE_MIN_FILTER, options.min); }\n    if (options.mag) { gl.samplerParameteri(sampler, gl.TEXTURE_MAG_FILTER, options.mag); }\n\n    return sampler;\n  }\n\n}\n","export type CoreShaderOptions = {\n  numberOfLights: number; // max number of lights\n}\n\nexport const createVertexShader = ({numberOfLights}: CoreShaderOptions) => {\n  // language=GLSL\n  return `\n#version 300 es\nprecision mediump float;\nlayout (location = 0) in vec3 aPosition;\nlayout (location = 1) in vec2 aTexCoord;\nlayout (location = 2) in vec3 aNormal;\n\n// TODO: Should we rename \"model\" to \"world\"?\n// See: https://webgl2fundamentals.org/webgl/lessons/webgl-matrix-naming.html\n\nuniform vec3 uLightPosition[${numberOfLights}];\nuniform mat4 uModel;\nuniform mat4 uViewModel;\nuniform mat4 uProjection;\n\nout vec3 vVertexViewPosition;\nout vec3 vVertexPosition;\nout vec3 vNormal;\nout vec2 vTexCoord;\nout vec3 vSurfaceToLight[${numberOfLights}];\n\nvoid main() {\n    vVertexPosition = aPosition;\n    vVertexViewPosition = (uViewModel * vec4(aPosition, 1)).xyz;\n    // Transform normals to update lightning calculation when vertex is transformed (rotated).\n    vNormal = mat3(uModel) * aNormal;\n    vTexCoord = aTexCoord;\n    gl_Position = uProjection * uViewModel * vec4(aPosition, 1);\n    \n    vec3 surfaceModalPosition = (aPosition * mat3(uModel)).xyz;\n    for (int i = 0; i < ${numberOfLights}; i++) {\n        vec3 lightModelPosition = uLightPosition[i] * mat3(uModel);\n        vSurfaceToLight[i] = lightModelPosition - surfaceModalPosition;\n    }\n\n}`.trim()\n}\n\n\nexport const createFragmentShader = ({\n  numberOfLights\n}: CoreShaderOptions) => {\n  // language=GLSL\n  return `\n#version 300 es\nprecision mediump float;\n\nuniform mat4 uViewModel;\nuniform mediump sampler2D uTexture;\nuniform vec4 uBaseColorFactor;\nuniform mat3 uBaseColorTransform;\nuniform vec3 uLightPosition[${numberOfLights}];\nuniform vec3 uLightDirection[${numberOfLights}];\nuniform vec3 uLightColor[${numberOfLights}];\nuniform float uLightIntensity[${numberOfLights}];\nuniform int uLightType[${numberOfLights}];\n\nin vec3 vSurfaceToLight[${numberOfLights}];\nin vec3 vVertexViewPosition;\nin vec3 vNormal;\nin vec2 vTexCoord;\n\nout vec4 oColor;\n\nint LIGHT_TYPE_AMBIENT = 0;\nint LIGHT_TYPE_DIRECTIONAL = 1;\nint LIGHT_TYPE_POINT = 2;\n\nvoid main() {\n    vec3 summedLight = vec3(0, 0, 0);\n    \n    for (int i = 0; i < ${numberOfLights}; i++) {\n        vec3 surfaceNormal = normalize(vNormal);\n        int lightType = uLightType[i];\n        vec3 light = vec3(0, 0, 0);\n        \n        if (lightType == LIGHT_TYPE_AMBIENT) {\n            light = uLightColor[i]; \n        }\n        \n        if (lightType == LIGHT_TYPE_DIRECTIONAL) {\n            float directionalIntensity = dot(surfaceNormal, uLightDirection[i]);\n            light = uLightColor[i] * directionalIntensity;\n        }\n        \n        if (lightType == LIGHT_TYPE_POINT) {\n            float distanceToLight = length(vSurfaceToLight[i]);\n            float attenuation = 1.0 / (distanceToLight * distanceToLight);\n            float directionalIntensity = dot(surfaceNormal, vSurfaceToLight[i]);\n            // Ignore negative factors, otherwise this step could take away light from other sources.\n            light = uLightColor[i] * max(directionalIntensity, 0.0) * attenuation;\n        }\n        \n        // Temp solution: cap intensity to avoid very bright spots on models.\n        summedLight += min(light * uLightIntensity[i], 1.0);\n     }\n     \n    vec2 uvTransformed = (vec3(vTexCoord, 1.0) * uBaseColorTransform).xy;\n        \n    oColor += texture(uTexture, uvTransformed) * uBaseColorFactor * vec4(summedLight, 1);\n}`.trim()\n}\n","import {Material, MaterialOptions} from \"./Material\";\n\ntype ShaderMaterialOptions = MaterialOptions & {\n  uniforms?: UniformsMap;\n  fragmentShader: string;\n}\n\nexport type UniformType =\n  '1f' | '2f' | '3f' | '4f' |\n  '1fv' | '2fv' | '3fv' | '4fv';\n\ntype UniformValue = number | number[];\n\nexport type ShaderUniform = {\n  type: UniformType;\n  value: UniformValue;\n}\n\ntype UniformsMap = Record<string, ShaderUniform>;\n\nexport default class ShaderMaterial extends Material {\n  fragmentShader: string;\n  uniforms: UniformsMap;\n\n  constructor (options: ShaderMaterialOptions) {\n    super(options);\n    this.fragmentShader = options.fragmentShader;\n    this.uniforms = options.uniforms ?? {};\n  }\n\n  /**\n   * Update an existing uniform value.\n   */\n  setUniform (name: string, value: any) {\n    this.uniforms[name].value = value;\n  }\n\n}\n","import {GameScene} from \"../core/GameScene\";\nimport {GLTFLoader} from \"../../engine/loaders/GLTFLoader\";\nimport {Sphere} from \"../objects/Sphere\";\nimport {Cube} from \"../objects/Cube\";\nimport {AmbientLight} from \"../../engine/lights/AmbientLight\";\nimport {DirectionalLight} from \"../../engine/lights/DirectionalLight\";\nimport {Wall} from \"../objects/Wall\";\nimport {Floor} from \"../objects/Floor\";\nimport * as CANNON from \"cannon-es\";\nimport {Player} from \"../objects/Player\";\n\nexport class TestScene extends GameScene {\n    async start(): Promise<void> {\n        const gltfLoader = new GLTFLoader();\n        await gltfLoader.load('./models/test.gltf');\n        const gltfScene = await gltfLoader.loadScene(gltfLoader.defaultScene);\n\n        const floorMaterial = new CANNON.Material();\n\n        const gltfWalls = gltfScene.findNodesByNamePattern(\"Wall.*\");\n\n        for (const wall of gltfWalls) {\n            this.addNode(new Wall(wall, {physicsMaterial: floorMaterial}))\n        }\n\n        const gltfFloor = gltfScene.findNodesByNamePattern(\"Floor\")[0];\n\n        this.addNode(new Floor(gltfFloor, {physicsMaterial: floorMaterial}))\n\n        const movableObjectMaterial = new CANNON.Material();\n        this.addNode(new Sphere({\n            radius: 1,\n            physicsMaterial: movableObjectMaterial,\n            translation: [3, 10, -5]\n        }));\n\n        this.addNode(new Cube({\n            scale: [1, 5, 1],\n            translation: [-3, 1, -5]\n        }));\n\n        this.addNode(new Cube({\n            name: \"Stretched cube\",\n            scale: [1, 5, 5],\n            translation: [-6, 1, -5]\n        }));\n\n        this.addNode(new AmbientLight({\n            color: [0, 0, 100],\n        }));\n\n        this.addNode(new DirectionalLight({\n            color: [100, 100, 100],\n            translation: [0, 10, 0],\n            direction: [1, 1, 0]\n        }));\n\n        this.world.addContactMaterial(new CANNON.ContactMaterial(\n            floorMaterial,\n            movableObjectMaterial,\n            {friction: 0.0, restitution: 1}\n        ));\n\n        this.addNode(new Player({\n            physicsMaterial: movableObjectMaterial,\n            translation: [0,2,0],\n        }));\n\n        await super.start();\n    }\n}\n","import {mat4} from \"gl-matrix\"\n\nimport {Camera, CameraOptions} from './Camera';\n\ntype OrthographicCameraOptions = CameraOptions & {\n    left?: number;\n    right?: number;\n    bottom?: number;\n    top?: number;\n    near?: number;\n    far?: number;\n}\n\nexport class OrthographicCamera extends Camera {\n    public left: number;\n    public right: number;\n    public bottom: number;\n    public top: number;\n    public near: number;\n    public far: number;\n\n    constructor(options: OrthographicCameraOptions = {}) {\n        super(options);\n\n        this.left = options.left ?? -1;\n        this.right = options.right ?? 1;\n        this.bottom = options.bottom ?? -1;\n        this.top = options.top ?? 1;\n        this.near = options.near ?? -1;\n        this.far = options.far ?? 1;\n        this.projection = mat4.create();\n\n        this.updateProjection();\n    }\n\n    updateProjection() {\n        mat4.ortho(this.projection,\n            this.left, this.right,\n            this.bottom, this.top,\n            this.near, this.far);\n    }\n\n}\n","/**\n * Returns a nested property of an object given it's path.\n * Otherwise returns undefined if path doesn't exist.\n */\nexport function deep(obj: any, path: string): any {\n  let o = JSON.parse(JSON.stringify(obj));\n  let parts = path.split(\".\").reverse();\n  let attribute = parts.pop();\n  while (parts.length > 0) {\n    o = o[attribute];\n    attribute = parts.pop();\n    if (!o) {\n      return undefined;\n    }\n  }\n  return o[attribute]\n}\n","import {GameObject, GameObjectOptions} from \"../core/GameObject\";\nimport * as CANNON from \"cannon-es\";\nimport {Mesh} from \"../../engine/core/Mesh\";\nimport {CubePrimitive} from \"../../engine/geometries/CubePrimitive\";\n\nexport class Cube extends GameObject {\n    public body: CANNON.Body;\n\n    constructor(options: GameObjectOptions) {\n        super(options);\n        this.name = options.name ?? \"Cube\";\n    }\n\n    async load(): Promise<void> {\n        const size = 1;\n\n        this.mesh = new Mesh({\n            primitives: [\n                new CubePrimitive({\n                    size,\n                })\n            ]\n        });\n\n        this.body = new CANNON.Body({\n            mass: 5,\n            shape: new CANNON.Box(new CANNON.Vec3(size, size, size)),\n            position: new CANNON.Vec3(...this.translation),\n            quaternion: new CANNON.Quaternion(...this.rotation),\n        });\n    }\n\n    update(): void {\n        this.translation = this.body.position.toArray();\n        this.updateMatrix();\n    }\n\n}\n","import {primitives} from \"twgl.js\";\nimport {TwglPrimitive} from \"./TwglPrimitive\";\nimport {PrimitiveOptions} from \"../core/Primitive\";\n\ntype CubePrimitiveOptions = PrimitiveOptions & {\n    size: number;\n}\n\nexport class CubePrimitive extends TwglPrimitive {\n    constructor(options: CubePrimitiveOptions) {\n        super({\n            ...options,\n            vertices: primitives.createCubeVertices(options.size),\n        });\n    }\n}\n","import * as CANNON from \"cannon-es\";\nimport {BufferView} from \"../engine/core/BufferView\";\nimport {Mesh} from \"../engine/core/Mesh\";\n\nexport function meshToCannonShape(mesh: Mesh): CANNON.Trimesh {\n    // We can assume there will only be a single primitive on imported objects.\n    // Later we should maybe refactor it so that mesh = primitive.\n    if (mesh.primitives.length > 1) {\n        throw new Error(`Expected a single primitive per mesh, got: ${JSON.stringify(mesh.primitives)}`)\n    }\n    const primitive = mesh.primitives[0];\n\n    return new CANNON.Trimesh(\n        getVertices(primitive.attributes.POSITION.bufferView),\n        getIndices(primitive.indices.bufferView),\n    );\n}\n\nfunction getVertices(bufferView: BufferView) {\n    const float32View = new Float32Array(bufferView.buffer, bufferView.byteOffset, bufferView.byteLength / Float32Array.BYTES_PER_ELEMENT);\n    return Array.from(float32View);\n}\n\nfunction getIndices(bufferView: BufferView) {\n    const uint16View = new Uint16Array(bufferView.buffer, bufferView.byteOffset, bufferView.byteLength / Uint16Array.BYTES_PER_ELEMENT);\n    return Array.from(uint16View);\n}\n","import {GameObject} from \"../core/GameObject\";\nimport {Object3D} from \"../../engine/core/Object3D\";\nimport * as CANNON from \"cannon-es\";\n\nexport type FloorOptions = {\n    physicsMaterial: CANNON.Material;\n}\n\nexport class Floor extends GameObject {\n    public body: CANNON.Body;\n    private readonly physicsMaterial: CANNON.Material;\n\n    constructor(object: Object3D, options: FloorOptions) {\n        super();\n        Object.assign(this, object);\n        this.physicsMaterial = options.physicsMaterial;\n    }\n\n    async load(): Promise<void> {\n        this.body = new CANNON.Body({\n            type: CANNON.BODY_TYPES.STATIC,\n            position: new CANNON.Vec3(...this.translation),\n            material: this.physicsMaterial,\n            // TODO: Why doesn't the below rotation work?\n            // quaternion: new CANNON.Quaternion(...this.rotation),\n            // Make the floor face up towards Z-direction.\n            quaternion: new CANNON.Quaternion().setFromEuler(-Math.PI / 2, 0, 0),\n            shape: new CANNON.Plane()\n        });\n    }\n\n    update(): void {\n        this.translation = this.body.position.toArray();\n        this.updateMatrix();\n    }\n\n}\n","import {GameScene} from \"../core/GameScene\";\nimport {GLTFLoader} from \"../../engine/loaders/GLTFLoader\";\nimport {Wall} from \"../objects/Wall\";\nimport * as CANNON from \"cannon-es\";\nimport {Sphere} from \"../objects/Sphere\";\nimport {Player} from \"../objects/Player\";\nimport {Key} from \"../objects/Key\";\nimport {AmbientLight} from \"../../engine/lights/AmbientLight\";\nimport {Door} from \"../objects/Door\";\nimport {Sky} from \"../objects/Sky\";\nimport {UiController} from \"../UiController\";\n\n// https://pmndrs.github.io/cannon-es/docs/classes/Body.html#COLLIDE_EVENT_NAME\ntype CollideEventData = {\n    body: CANNON.Body;\n    target: CANNON.Body;\n    contact: CANNON.ContactEquation;\n}\n\nexport class LabyrinthScene extends GameScene {\n    private keys: Key[];\n    private winDoor: Door;\n    private player: Player;\n\n    async start(): Promise<void> {\n        const labyrinthMeshLoader = new GLTFLoader();\n        await labyrinthMeshLoader.load('./models/level.gltf');\n        const labyrinthMeshScene = await labyrinthMeshLoader.loadScene(labyrinthMeshLoader.defaultScene);\n\n        const keyMeshLoader = new GLTFLoader();\n        await keyMeshLoader.load(\"./models/key.gltf\");\n        const keyMeshScene = await keyMeshLoader.loadScene(keyMeshLoader.defaultScene);\n\n        const door = labyrinthMeshScene.findNodesByName(\"Door\")[0];\n\n        if (!door) {\n            throw new Error(\"Door not found in the loaded scene\")\n        }\n\n        const keyMesh = keyMeshScene.findNodesByNamePattern(\"Key\")[0];\n\n        if (!keyMesh) {\n            throw new Error(\"Key not found in the loaded scene\")\n        }\n\n        const propMaterial = new CANNON.Material();\n        const wallMaterial = new CANNON.Material();\n        const playerMaterial = new CANNON.Material();\n\n        this.winDoor = (new Door(door, {\n            physicsMaterial: wallMaterial\n        }));\n\n        this.addNode(this.winDoor);\n\n        this.addNode(...labyrinthMeshScene.findNodesByNamePattern(\"Light\"));\n\n        this.addNode(new Sky())\n\n        this.addNode(new AmbientLight({\n            color: [45, 80, 160],\n            intensity: 0.5\n        }))\n\n        const labyrinthMesh = labyrinthMeshScene.findNodesByNamePattern(\"Wall\")[0];\n\n        const wall = new Wall(labyrinthMesh, {\n            physicsMaterial: wallMaterial\n        });\n\n        const generateKey = () => {\n            const keyScale = 0.05;\n            const randomPosition = this.getRandomKeyWorldPosition(wall.body.aabb);\n            // Position it above the wall level,\n            // so that it can't land within the wall.\n            randomPosition.y = 2;\n            // Every time we reuse a mesh instance, we must clone it.\n            return new Key(keyMesh.clone(), {\n                physicsMaterial: propMaterial,\n                translation: [randomPosition.x, randomPosition.y, randomPosition.z],\n                rotation: [0, 0, 0, 0],\n                scale: [keyScale, keyScale, keyScale]\n            })\n        }\n\n        // TODO: Generate variable number of keys if needed\n        this.keys = [\n            generateKey(),\n            generateKey(),\n            generateKey(),\n            generateKey(),\n        ];\n        this.addNode(...this.keys);\n\n        this.addNode(wall);\n\n        this.player = new Player({\n            physicsMaterial: playerMaterial,\n            translation: [0, 2, 0],\n        })\n        this.addNode(this.player);\n\n        await super.start();\n\n        this.player.body.addEventListener(\n            CANNON.Body.COLLIDE_EVENT_NAME,\n            this.handlePlayerCollision.bind(this)\n        );\n\n        this.scheduleGameLostIn(300);\n\n        const uiController = UiController.create()\n        uiController.setKeysFound({\n            foundKeys: 0,\n            totalKeys: this.keys.length\n        })\n    }\n\n    private getRandomKeyWorldPosition(worldAabb: CANNON.AABB): CANNON.Vec3 {\n        // Downscale the bounds by some factor\n        // so that we are not too close to the edges and fall off the world.\n        const borderScalingFactor = 0.9\n        return this.getRandomVector(\n            worldAabb.lowerBound.scale(borderScalingFactor),\n            worldAabb.upperBound.scale(borderScalingFactor),\n        )\n    }\n\n    private getRandomVector(min: CANNON.Vec3, max: CANNON.Vec3) {\n        return new CANNON.Vec3(\n            this.getRandomScalar(min.x, max.x),\n            this.getRandomScalar(min.y, max.y),\n            this.getRandomScalar(min.z, max.z),\n        )\n    }\n\n    private getRandomScalar(min: number, max: number) {\n        return Math.random() * (max - min) + min;\n    }\n\n\n    private handlePlayerCollision(event: CollideEventData) {\n        const uiController = UiController.create();\n\n        const keyTarget = this.keys.find(key => key.body === event.body);\n        const doorTarget = this.winDoor.body === event.body;\n\n        if (keyTarget) {\n            console.log(\"Player collided with key: \", keyTarget)\n            keyTarget.despawn();\n            this.player.pickupKey(keyTarget);\n            uiController.setKeysFound({\n                foundKeys: this.player.foundKeys.length,\n                totalKeys: this.keys.length\n            })\n        }\n\n        const hasWon = this.player.foundKeys.length === this.keys.length;\n        if (doorTarget && hasWon) {\n            this.player.controls.disable();\n            uiController.showWinScreen()\n        }\n    }\n\n    scheduleGameLostIn(maxGameDurationInS: number){\n        const uiController = UiController.create()\n        let secondsLeft = maxGameDurationInS;\n        const timer = setInterval(() => {\n            secondsLeft--;\n            uiController.setTimeLeft(secondsLeft);\n            if (secondsLeft <= 0) {\n                clearInterval(timer);\n                this.player.controls.disable();\n                uiController.showLoseScreen();\n            }\n        }, 1000);\n    }\n}\n","import {GameObject, GameObjectOptions} from \"../core/GameObject\";\nimport {Object3D} from \"../../engine/core/Object3D\";\nimport * as CANNON from \"cannon-es\";\nimport {quat} from \"gl-matrix\";\nimport { Howl } from \"howler\";\n\ntype KeyOptions = GameObjectOptions & {\n    physicsMaterial: CANNON.Material;\n}\n\nexport class Key extends GameObject {\n    public body: CANNON.Body;\n    private readonly physicsMaterial: CANNON.Material;\n\n    private sound = new Howl({\n        src: ['./sounds/kill_sound.mp3'],\n        html5: true,\n        volume: 1,\n    });\n\n    constructor(object: Object3D, options: KeyOptions) {\n        super();\n        Object.assign(this, {...object, ...options});\n        this.physicsMaterial = options.physicsMaterial;\n    }\n\n    async load(): Promise<void> {\n        // This is the smallest sphere size that doesn't fall\n        // thought the floor trimesh when being dropped from the sky.\n        // Lowering this will make it too small for the current simulation precision.\n        const smallestSizeWithRealTimeSimulation = 0.15;\n\n        // Ideally this key would be modeled as a trimesh or box shape,\n        // but collisions between trimesh <-> trimesh and trimesh <-> box aren't supported yet.\n        // See:\n        // - https://github.com/pmndrs/cannon-es/issues/21\n        // - https://pmndrs.github.io/cannon-es/docs/#supported-shape-collision-pairs\n        const shape = new CANNON.Sphere(smallestSizeWithRealTimeSimulation);\n\n        this.body = new CANNON.Body({\n            mass: 0.01,\n            material: this.physicsMaterial,\n            position: new CANNON.Vec3(...this.translation),\n            quaternion: new CANNON.Quaternion(...this.rotation),\n            shape\n        });\n    }\n\n    update(dt: number, time: number): void {\n        // Don't use the rotation from physical body,\n        // as we want the rendered key to be static.\n        this.translation = this.body.position.toArray();\n\n        // Animate horizontal key rotation.\n        const rotationX = (time * 100) % 360;\n        quat.fromEuler(this.rotation, rotationX, 0, -90);\n\n        this.updateMatrix();\n    }\n\n    despawn(): void {\n        this.body.position = new CANNON.Vec3(0, -10, 0);\n        this.body.mass = 0;\n        this.sound.play();\n    }\n}\n","import {GameObject} from \"../core/GameObject\";\nimport {Object3D} from \"../../engine/core/Object3D\";\nimport * as CANNON from \"cannon-es\";\nimport {BufferView} from \"../../engine/core/BufferView\";\nimport {meshToCannonShape} from \"../utils\";\n\ntype WallOptions = {\n    physicsMaterial: CANNON.Material;\n}\n\nexport class Door extends GameObject {\n    public body: CANNON.Body;\n    private readonly physicsMaterial: CANNON.Material;\n\n    constructor(object: Object3D, options: WallOptions) {\n        super();\n        Object.assign(this, object);\n        this.physicsMaterial = options.physicsMaterial;\n    }\n\n    async load(): Promise<void> {\n        // Approximate dimensions obtained by resetting the root node transformations\n        // and comparing the true door size against other objects in the scene\n        // with known dimensions (e.g. sky sphere).\n        const originalDimensions = new CANNON.Vec3(10, 20, 3);\n        const scaledDimensions = originalDimensions.vmul(new CANNON.Vec3(...this.scale));\n        const shape = new CANNON.Box(scaledDimensions);\n\n        this.body = new CANNON.Body({\n            type: CANNON.BODY_TYPES.STATIC,\n            material: this.physicsMaterial,\n            position: new CANNON.Vec3(...this.translation),\n            quaternion: new CANNON.Quaternion(...this.rotation),\n            shape\n        });\n    }\n\n    update(): void {\n        this.translation = this.body.position.toArray();\n        this.updateMatrix();\n    }\n\n}\n","import {Mesh} from \"../../engine/core/Mesh\";\nimport {SpherePrimitive} from \"../../engine/geometries/SpherePrimitive\";\nimport {Material} from \"../../engine/materials/Material\";\nimport { Texture } from \"../../engine/textures/Texture\";\nimport {GameObject} from \"../core/GameObject\";\nimport * as CANNON from \"cannon-es\"\nimport {quat} from \"gl-matrix\";\n\nexport class Sky extends GameObject {\n    body?: CANNON.Body;\n\n    constructor() {\n        super({\n            name: \"Sky sphere\",\n            // Invert one of the axis, so that the vertices face\n            // towards the player (will not be culled).\n            scale: [1, 1, -1],\n            mesh: new Mesh({\n                primitives: [\n                    new SpherePrimitive({\n                        radius: 20,\n                        subdivisionsAxis: 10,\n                        subdivisionsHeight: 10\n                    })\n                ]\n            })\n        });\n    }\n\n    async load(): Promise<void> {\n        // A hack to make the sky brighter.\n        const brightnessFactor = 3;\n        this.mesh.setMaterial(new Material({\n            baseColorFactor: [brightnessFactor, brightnessFactor, brightnessFactor, brightnessFactor],\n            baseColorTexture: new Texture({\n                image: await this.fetchImage(\"./models/sky.jpg\")\n            }),\n        }));\n\n        // At the top and bottom of the sphere the texture is weirdly mapped.\n        // Rotate it by 90deg so that part isn't visible from the labyrinth floor.\n        quat.fromEuler(this.rotation, 90, 0, 0);\n        this.updateMatrix();\n    }\n\n    update(dt: number, time: number): void {\n        // TODO: Animate - rotate the sky slowly?\n    }\n\n    private fetchImage(url: string): Promise<HTMLImageElement> {\n        return new Promise((resolve, reject) => {\n            let image = new Image();\n            image.addEventListener('load', e => resolve(image));\n            image.addEventListener('error', reject);\n            image.src = new URL(url, window.location.origin).toString();\n        });\n    }\n\n\n}\n"],"sourceRoot":""}